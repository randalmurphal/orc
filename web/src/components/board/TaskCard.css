/* TaskCard - Compact queue card component
 *
 * Matches mockup design from example_ui/board.html
 * Exact CSS values from spec:
 * - padding: 8px 10px
 * - border-radius: 8px
 * - gap: 10px
 */

/* Position number (queue order indicator) */
.task-card-position {
	width: 16px;
	height: 16px;
	background: var(--bg-surface);
	border: 1px solid var(--border);
	border-radius: 3px;
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 10px;
	font-weight: 600;
	color: var(--text-muted);
	flex-shrink: 0;
}

/* Base card styles */
.task-card {
	display: flex;
	align-items: flex-start;
	gap: 10px;
	background: var(--bg-surface);
	border: 1px solid var(--border);
	border-radius: 8px;
	padding: 8px 10px;
	cursor: pointer;
	transition: background-color 0.15s ease, border-color 0.15s ease, transform 0.15s ease, box-shadow 0.15s ease;
	min-height: 44px; /* Touch target minimum */
}

/* Hover state */
.task-card:hover {
	border-color: var(--border-light);
	background: var(--bg-hover);
}

/* Focus visible state for keyboard navigation */
.task-card:focus-visible {
	outline: none;
	border-color: var(--primary);
	box-shadow: 0 0 0 2px var(--primary-glow);
}

/* Selected state */
.task-card.selected {
	border-color: var(--primary);
	box-shadow: 0 0 0 1px var(--primary-dim);
}

.task-card.selected:hover {
	border-color: var(--primary);
}

/* Active/pressed state */
.task-card:active {
	transform: scale(0.99);
}

/* Category icon */
.task-card-category {
	flex-shrink: 0;
	display: flex;
	align-items: center;
	justify-content: center;
	width: 20px;
	height: 20px;
	margin-top: 1px;
}

/* Main content area */
.task-card-content {
	flex: 1;
	min-width: 0;
	display: flex;
	flex-direction: column;
	gap: 2px;
}

/* Header with task ID and initiative */
.task-card-header {
	display: flex;
	align-items: center;
	gap: 6px;
}

/* Task ID badge */
.task-card-id {
	font-family: var(--font-mono);
	font-size: 10px;
	font-weight: 600;
	color: var(--text-muted);
	letter-spacing: 0.02em;
}

/* Initiative badge (when shown) */
.task-card-initiative {
	font-family: var(--font-mono);
	font-size: 9px;
	font-weight: 500;
	color: var(--primary);
	background: var(--primary-dim);
	padding: 1px 4px;
	border-radius: 3px;
}

/* Task title */
.task-card-title {
	margin: 0;
	font-size: 12px;
	font-weight: 400;
	color: var(--text-primary);
	line-height: 1.4;
	/* 2-line clamp with ellipsis */
	display: -webkit-box;
	-webkit-line-clamp: 2;
	line-clamp: 2;
	-webkit-box-orient: vertical;
	overflow: hidden;
	text-overflow: ellipsis;
	/* Reset any inherited h3 styles */
	text-transform: none;
	letter-spacing: normal;
}

/* Status indicators container */
.task-card-status {
	flex-shrink: 0;
	display: flex;
	align-items: center;
	gap: 6px;
	margin-top: 3px;
}

/* Priority dot */
.task-card-priority {
	width: 6px;
	height: 6px;
	border-radius: 50%;
	flex-shrink: 0;
}

/* Blocked warning icon */
.task-card-blocked {
	display: flex;
	align-items: center;
	justify-content: center;
	color: var(--red);
	animation: blocked-pulse 2s ease-in-out infinite;
}

@keyframes blocked-pulse {
	0%, 100% {
		opacity: 1;
	}
	50% {
		opacity: 0.5;
	}
}

/* Running progress indicator */
.task-card-running {
	display: flex;
	align-items: center;
	justify-content: center;
}

.task-card-running-dot {
	width: 8px;
	height: 8px;
	border-radius: 50%;
	background: var(--primary);
	animation: running-pulse 1.5s ease-in-out infinite;
}

@keyframes running-pulse {
	0%, 100% {
		opacity: 1;
		transform: scale(1);
	}
	50% {
		opacity: 0.6;
		transform: scale(0.85);
	}
}

/* ============================================================================
   State Variations
   ============================================================================ */

/* Running task state */
.task-card.running {
	border-color: var(--primary);
	background: linear-gradient(
		135deg,
		var(--bg-surface) 0%,
		color-mix(in srgb, var(--primary) 5%, var(--bg-surface)) 100%
	);
}

.task-card.running:hover {
	border-color: var(--primary-bright);
}

/* Blocked task state */
.task-card.blocked {
	border-color: var(--red);
	background: linear-gradient(
		135deg,
		var(--bg-surface) 0%,
		color-mix(in srgb, var(--red) 3%, var(--bg-surface)) 100%
	);
}

.task-card.blocked:hover {
	border-color: var(--red);
}

/* Pending decision state - purple glow */
.task-card.has-pending-decision {
	box-shadow: 0 0 0 1px var(--primary), 0 0 12px var(--primary-glow);
	animation: decision-pulse 2s ease-in-out infinite;
}

@keyframes decision-pulse {
	0%, 100% {
		box-shadow: 0 0 0 1px var(--primary), 0 0 12px var(--primary-glow);
	}
	50% {
		box-shadow: 0 0 0 1px var(--primary-bright), 0 0 20px var(--primary-glow);
	}
}

/* Decision count badge */
.task-card-decision-badge {
	display: flex;
	align-items: center;
	justify-content: center;
	min-width: 16px;
	height: 16px;
	padding: 0 4px;
	background: var(--primary);
	color: var(--text-on-primary);
	font-family: var(--font-mono);
	font-size: 10px;
	font-weight: 600;
	border-radius: 8px;
	line-height: 1;
}

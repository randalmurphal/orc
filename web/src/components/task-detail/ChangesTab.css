/* Changes Tab */
.changes-tab {
	display: flex;
	flex-direction: column;
	height: 100%;
	overflow: hidden;
}

.changes-loading,
.changes-error,
.changes-empty {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	gap: var(--space-3);
	padding: var(--space-12);
	color: var(--text-muted);
}

.changes-loading .loading-spinner {
	width: 32px;
	height: 32px;
	border: 3px solid var(--border-default);
	border-top-color: var(--accent-primary);
	border-radius: 50%;
	animation: spin 0.8s linear infinite;
}

.changes-error {
	color: var(--status-danger);
}

.changes-empty h3 {
	margin: 0;
	font-size: var(--text-lg);
	color: var(--text-secondary);
}

.changes-empty p {
	margin: 0;
	font-size: var(--text-sm);
}

/* Diff Toolbar */
.diff-toolbar {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: var(--space-3) var(--space-4);
	background: var(--bg-secondary);
	border: 1px solid var(--border-subtle);
	border-radius: var(--radius-lg) var(--radius-lg) 0 0;
	flex-shrink: 0;
	gap: var(--space-4);
	flex-wrap: wrap;
}

.toolbar-left,
.toolbar-right {
	display: flex;
	align-items: center;
	gap: var(--space-3);
}

/* View Toggle */
.view-toggle {
	display: flex;
	border: 1px solid var(--border-default);
	border-radius: var(--radius-md);
	overflow: hidden;
}

.view-toggle button {
	padding: var(--space-1-5) var(--space-3);
	border: none;
	background: var(--bg-tertiary);
	color: var(--text-secondary);
	cursor: pointer;
	font-size: var(--text-xs);
	font-weight: var(--font-medium);
	transition: all var(--duration-fast) var(--ease-out);
}

.view-toggle button:first-child {
	border-right: 1px solid var(--border-default);
}

.view-toggle button:hover {
	background: var(--bg-surface);
	color: var(--text-primary);
}

.view-toggle button.active {
	background: var(--accent-primary);
	color: var(--text-inverse);
}

.expand-btn {
	padding: var(--space-1-5) var(--space-3);
	background: var(--bg-tertiary);
	border: 1px solid var(--border-default);
	border-radius: var(--radius-md);
	color: var(--text-secondary);
	font-size: var(--text-xs);
	font-weight: var(--font-medium);
	cursor: pointer;
	transition: all var(--duration-fast) var(--ease-out);
}

.expand-btn:hover {
	background: var(--bg-surface);
	color: var(--text-primary);
	border-color: var(--border-strong);
}

/* Review Summary */
.review-summary {
	display: flex;
	align-items: center;
	gap: var(--space-2);
	padding: var(--space-1) var(--space-2);
	background: var(--bg-tertiary);
	border-radius: var(--radius-md);
	font-size: var(--text-xs);
}

.review-summary .count {
	font-weight: var(--font-medium);
}

.review-summary .count.blocker {
	color: var(--status-danger);
}

.review-summary .count.issue {
	color: var(--status-warning);
}

.review-summary .count.suggestion {
	color: var(--status-info);
}

.send-to-agent-btn {
	display: flex;
	align-items: center;
	gap: var(--space-1);
	padding: var(--space-1-5) var(--space-3);
	background: var(--accent-primary);
	border: none;
	border-radius: var(--radius-md);
	color: var(--text-inverse);
	font-size: var(--text-xs);
	font-weight: var(--font-medium);
	cursor: pointer;
	transition: background var(--duration-fast) var(--ease-out);
}

.send-to-agent-btn:hover:not(:disabled) {
	background: var(--accent-hover);
}

.send-to-agent-btn:disabled {
	opacity: 0.6;
	cursor: not-allowed;
}

.send-to-agent-btn .btn-spinner {
	width: 12px;
	height: 12px;
	border: 2px solid rgba(255, 255, 255, 0.3);
	border-top-color: white;
	border-radius: 50%;
	animation: spin 0.8s linear infinite;
}

/* File List */
.file-list {
	flex: 1;
	overflow-y: auto;
	border: 1px solid var(--border-subtle);
	border-top: none;
	background: var(--bg-primary);
}

/* General Comments Section */
.general-comments-section {
	border: 1px solid var(--border-subtle);
	border-top: none;
	border-radius: 0 0 var(--radius-lg) var(--radius-lg);
	padding: var(--space-4);
	background: var(--bg-secondary);
}

.general-comments-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: var(--space-3);
}

.general-comments-header h3 {
	font-size: var(--text-sm);
	font-weight: var(--font-semibold);
	color: var(--text-primary);
	margin: 0;
}

.add-general-btn {
	display: flex;
	align-items: center;
	gap: var(--space-1);
	padding: var(--space-1) var(--space-2);
	background: var(--bg-tertiary);
	border: 1px solid var(--border-default);
	border-radius: var(--radius-md);
	color: var(--text-secondary);
	font-size: var(--text-xs);
	cursor: pointer;
	transition: all var(--duration-fast) var(--ease-out);
}

.add-general-btn:hover {
	background: var(--bg-surface);
	border-color: var(--accent-primary);
	color: var(--accent-primary);
}

.general-comments-list {
	display: flex;
	flex-direction: column;
	gap: var(--space-2);
	margin-bottom: var(--space-3);
}

.general-comment {
	background: var(--bg-tertiary);
	border-radius: var(--radius-md);
	padding: var(--space-3);
}

.general-comment .comment-header {
	display: flex;
	align-items: center;
	gap: var(--space-2);
	margin-bottom: var(--space-2);
}

.general-comment .severity-badge {
	padding: var(--space-0-5) var(--space-1-5);
	font-size: var(--text-2xs);
	font-weight: var(--font-semibold);
	text-transform: uppercase;
	border-radius: var(--radius-sm);
}

.general-comment .severity-badge.suggestion {
	background: var(--status-info-bg);
	color: var(--status-info);
}

.general-comment .severity-badge.issue {
	background: var(--status-warning-bg);
	color: var(--status-warning);
}

.general-comment .severity-badge.blocker {
	background: var(--status-danger-bg);
	color: var(--status-danger);
}

.general-comment .timestamp {
	font-size: var(--text-xs);
	color: var(--text-muted);
}

.general-comment .comment-content {
	font-size: var(--text-sm);
	color: var(--text-primary);
	line-height: var(--leading-relaxed);
	margin-bottom: var(--space-2);
}

.general-comment .comment-actions {
	display: flex;
	gap: var(--space-2);
}

.general-comment .action-btn {
	padding: var(--space-0-5) var(--space-1-5);
	font-size: var(--text-2xs);
	background: transparent;
	border: 1px solid var(--border-subtle);
	border-radius: var(--radius-sm);
	color: var(--text-muted);
	cursor: pointer;
}

.general-comment .action-btn:hover {
	background: var(--bg-surface);
	border-color: var(--border-default);
}

.general-comment .action-btn.delete:hover {
	color: var(--status-danger);
	border-color: var(--status-danger);
}

/* General Comment Form */
.general-comment-form {
	display: flex;
	flex-direction: column;
	gap: var(--space-2);
	background: var(--bg-tertiary);
	padding: var(--space-3);
	border-radius: var(--radius-md);
}

.general-comment-form .severity-pills {
	display: flex;
	gap: var(--space-1);
}

.general-comment-form .severity-pill {
	padding: var(--space-0-5) var(--space-2);
	font-size: var(--text-2xs);
	font-weight: var(--font-medium);
	background: var(--bg-primary);
	border: 1px solid var(--border-subtle);
	border-radius: var(--radius-full);
	color: var(--text-muted);
	cursor: pointer;
	text-transform: capitalize;
}

.general-comment-form .severity-pill:hover {
	border-color: var(--border-default);
}

.general-comment-form .severity-pill.selected {
	background: var(--accent-primary);
	border-color: var(--accent-primary);
	color: var(--text-inverse);
}

.general-comment-form textarea {
	width: 100%;
	padding: var(--space-2);
	font-size: var(--text-sm);
	font-family: var(--font-body);
	background: var(--bg-primary);
	border: 1px solid var(--border-default);
	border-radius: var(--radius-md);
	color: var(--text-primary);
	resize: vertical;
	min-height: 80px;
}

.general-comment-form textarea:focus {
	outline: none;
	border-color: var(--accent-primary);
}

.general-comment-form .form-actions {
	display: flex;
	justify-content: flex-end;
	gap: var(--space-2);
}

.general-comment-form .cancel-btn {
	padding: var(--space-1) var(--space-2);
	font-size: var(--text-xs);
	background: transparent;
	border: 1px solid var(--border-default);
	border-radius: var(--radius-md);
	color: var(--text-secondary);
	cursor: pointer;
}

.general-comment-form .submit-btn {
	padding: var(--space-1) var(--space-3);
	font-size: var(--text-xs);
	font-weight: var(--font-medium);
	background: var(--accent-primary);
	border: none;
	border-radius: var(--radius-md);
	color: var(--text-inverse);
	cursor: pointer;
}

.general-comment-form .submit-btn:disabled {
	opacity: 0.5;
	cursor: not-allowed;
}

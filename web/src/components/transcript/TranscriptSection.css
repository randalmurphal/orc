/* =============================================================================
   TranscriptSection - Collapsible Content Block Styles
   ============================================================================= */

/* Section Container */
.transcript-section {
	border: 1px solid var(--border);
	border-radius: var(--radius-md);
	background: var(--bg-elevated);
	overflow: hidden;
	margin-bottom: var(--space-2);
	/* CSS custom property set by component */
	--section-accent: var(--primary);
}

.transcript-section:last-child {
	margin-bottom: 0;
}

/* Expanded state gets a slight accent border */
.transcript-section--expanded {
	border-color: var(--border-light);
}

/* Nesting depth indentation */
.transcript-section--depth-1 {
	margin-left: var(--space-4);
}

.transcript-section--depth-2 {
	margin-left: var(--space-8);
}

.transcript-section--depth-3 {
	margin-left: var(--space-12);
}

/* =============================================================================
   Section Header (clickable toggle)
   ============================================================================= */

.transcript-section-header {
	display: flex;
	align-items: center;
	gap: var(--space-2);
	width: 100%;
	padding: var(--space-2) var(--space-3);
	background: var(--bg-surface);
	border: none;
	border-left: 3px solid var(--section-accent);
	cursor: pointer;
	text-align: left;
	font-family: inherit;
	font-size: var(--text-sm);
	color: var(--text-primary);
	transition:
		background-color var(--duration-fast) var(--ease-out),
		border-color var(--duration-fast) var(--ease-out);
}

.transcript-section-header:hover {
	background: var(--bg-hover);
}

.transcript-section-header:focus-visible {
	outline: 2px solid var(--primary);
	outline-offset: -2px;
}

/* =============================================================================
   Header Elements
   ============================================================================= */

/* Chevron icon for expand/collapse state */
.transcript-section-chevron {
	display: flex;
	align-items: center;
	justify-content: center;
	flex-shrink: 0;
	color: var(--text-muted);
	transition: transform var(--duration-fast) var(--ease-out);
}

/* Section type icon */
.transcript-section-icon {
	display: flex;
	align-items: center;
	justify-content: center;
	flex-shrink: 0;
	color: var(--section-accent);
}

/* Title */
.transcript-section-title {
	font-weight: var(--font-semibold);
	color: var(--text-primary);
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

/* Subtitle/metadata */
.transcript-section-subtitle {
	font-size: var(--text-xs);
	color: var(--text-muted);
	font-family: var(--font-mono);
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

/* Right side metadata container */
.transcript-section-meta {
	display: flex;
	align-items: center;
	gap: var(--space-2);
	margin-left: auto;
	flex-shrink: 0;
}

/* Badge (token count, status, etc.) */
.transcript-section-badge {
	display: inline-flex;
	align-items: center;
	padding: var(--space-0-5) var(--space-1-5);
	font-size: var(--text-xs);
	font-family: var(--font-mono);
	color: var(--text-muted);
	background: var(--bg-base);
	border-radius: var(--radius-sm);
}

/* Timestamp */
.transcript-section-timestamp {
	font-size: var(--text-xs);
	font-family: var(--font-mono);
	color: var(--text-muted);
}

/* =============================================================================
   Section Content
   ============================================================================= */

.transcript-section-content {
	padding: var(--space-3);
	border-top: 1px solid var(--border);
	background: var(--bg-base);
	animation: fade-in-up var(--duration-fast) var(--ease-out);
}

/* Content typography defaults */
.transcript-section-content pre {
	font-family: var(--font-mono);
	font-size: var(--text-sm);
	line-height: var(--leading-relaxed);
	white-space: pre-wrap;
	word-break: break-word;
	color: var(--text-primary);
	margin: 0;
	max-height: 400px;
	overflow-y: auto;
}

.transcript-section-content p {
	margin: 0;
	color: var(--text-secondary);
	font-size: var(--text-sm);
	line-height: var(--leading-relaxed);
}

.transcript-section-content p + p {
	margin-top: var(--space-2);
}

/* =============================================================================
   Section Type Variants
   ============================================================================= */

/* Phase sections - primary purple accent */
.transcript-section--phase > .transcript-section-header {
	background: var(--primary-dim);
}

.transcript-section--phase > .transcript-section-header:hover {
	background: var(--selection-bg);
}

/* Iteration sections - cyan accent */
.transcript-section--iteration > .transcript-section-header {
	background: var(--cyan-dim);
}

/* Prompt sections - primary purple accent */
.transcript-section--prompt > .transcript-section-header {
	background: var(--primary-dim);
}

/* Response sections - green accent */
.transcript-section--response > .transcript-section-header {
	background: var(--green-dim);
}

/* Tool call sections - amber accent */
.transcript-section--tool_call > .transcript-section-header {
	background: var(--amber-dim);
}

/* Tool result sections - orange accent */
.transcript-section--tool_result > .transcript-section-header {
	background: var(--orange-dim);
}

/* Error sections - red accent */
.transcript-section--error > .transcript-section-header {
	background: var(--red-dim);
}

.transcript-section--error > .transcript-section-content {
	background: var(--red-bg);
	border-color: var(--red-border);
}

/* System sections - muted styling */
.transcript-section--system > .transcript-section-header {
	background: var(--bg-surface);
}

.transcript-section--system .transcript-section-title {
	color: var(--text-secondary);
}

/* =============================================================================
   Animation
   ============================================================================= */

@keyframes fade-in-up {
	from {
		opacity: 0;
		transform: translateY(-4px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

/* =============================================================================
   Responsive
   ============================================================================= */

@media (max-width: 600px) {
	.transcript-section-header {
		padding: var(--space-2);
		gap: var(--space-1-5);
	}

	.transcript-section-subtitle {
		display: none;
	}

	.transcript-section-content {
		padding: var(--space-2);
	}

	/* Reduce nesting on mobile */
	.transcript-section--depth-1,
	.transcript-section--depth-2,
	.transcript-section--depth-3 {
		margin-left: var(--space-2);
	}
}

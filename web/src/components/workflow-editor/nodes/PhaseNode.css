/* PhaseNode - custom React Flow node for workflow phases */

.phase-node {
	background: var(--bg-card);
	border: 1px solid var(--border);
	border-radius: var(--radius-lg);
	padding: var(--space-2) var(--space-3);
	font-family: var(--font-sans);
	font-size: var(--text-sm);
	color: var(--text-primary);
	min-width: 180px;
	max-width: 240px;
	/* SC-2: Smooth CSS transitions for hover/selection states */
	transition:
		transform var(--duration-fast) var(--ease-out),
		box-shadow var(--duration-fast) var(--ease-out),
		border-color var(--duration-fast) var(--ease-out);
}

/* SC-2: Hover state - subtle scale and shadow */
.phase-node:hover {
	transform: scale(1.02);
	box-shadow: var(--shadow-md);
}

/* Selection */
.phase-node.selected {
	border-color: var(--primary);
	box-shadow: var(--shadow-glow-sm);
}

/* Header: sequence badge + title */
.phase-node-header {
	display: flex;
	align-items: flex-start;
	gap: var(--space-2);
}

.phase-node-sequence {
	display: flex;
	align-items: center;
	justify-content: center;
	min-width: 20px;
	height: 20px;
	border-radius: var(--radius-full);
	background: var(--bg-secondary);
	border: 1px solid var(--border);
	font-size: var(--text-xs);
	font-weight: 600;
	color: var(--text-secondary);
	flex-shrink: 0;
}

.phase-node-title {
	display: flex;
	flex-direction: column;
	gap: var(--space-0-5);
	min-width: 0;
}

.phase-node-name {
	font-weight: 600;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

.phase-node-template-id {
	font-family: var(--font-mono);
	font-size: var(--text-xs);
	color: var(--text-tertiary);
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

/* Metadata badges */
.phase-node-badges {
	display: flex;
	flex-wrap: wrap;
	gap: var(--space-1);
	margin-top: var(--space-1-5);
}

.phase-node-badge {
	display: inline-flex;
	align-items: center;
	padding: var(--space-0-5) var(--space-1);
	font-size: var(--text-xs);
	border-radius: var(--radius-sm);
	background: var(--bg-primary);
	border: 1px solid var(--border);
	color: var(--text-secondary);
}

.phase-node-badge--gate {
	background: var(--cyan-dim);
	border-color: var(--cyan);
	color: var(--cyan);
}

.phase-node-badge--iterations {
	background: var(--orange-dim);
	border-color: var(--orange);
	color: var(--orange);
}

.phase-node-badge--model {
	background: var(--primary-dim);
	border-color: var(--primary);
	color: var(--primary);
}

/* Execution footer */
.phase-node-footer {
	display: flex;
	gap: var(--space-2);
	margin-top: var(--space-1-5);
	font-size: var(--text-xs);
	color: var(--text-tertiary);
}

/* Status states */
.phase-node--running {
	border-color: var(--primary);
	box-shadow: 0 0 12px var(--primary-glow);
	animation: phase-pulse 2s ease-in-out infinite;
}

.phase-node--completed {
	border-left: 3px solid var(--green);
}

.phase-node--failed {
	border-left: 3px solid var(--red);
}

.phase-node--skipped {
	opacity: 0.5;
}

.phase-node--skipped .phase-node-name {
	text-decoration: line-through;
}

.phase-node--pending {
	opacity: 0.7;
}

.phase-node--blocked {
	opacity: 0.6;
	border-left: 3px solid var(--orange);
}

@keyframes phase-pulse {
	0%, 100% {
		box-shadow: 0 0 8px var(--primary-glow);
	}
	50% {
		box-shadow: 0 0 16px var(--primary-glow);
	}
}

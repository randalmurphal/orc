/* WorkflowCanvas styles - React Flow theme overrides using orc design tokens */

.workflow-canvas {
	width: 100%;
	height: 100%;
	position: relative;
}

/* React Flow node defaults — custom node components handle their own styling */
.workflow-canvas .react-flow__node-default {
	font-size: var(--text-sm);
	font-family: var(--font-body);
	border-radius: var(--radius-md);
	border: 1px solid var(--border);
	background: var(--bg-secondary);
	color: var(--text-primary);
	padding: var(--space-2) var(--space-3);
}

.workflow-canvas .react-flow__node-default.selected {
	border-color: var(--primary);
	box-shadow: var(--shadow-glow-sm);
}

/* Edge styling */
.workflow-canvas .react-flow__edge-path {
	stroke: var(--border-light);
	stroke-width: 2;
	transition: stroke 0.2s ease, stroke-width 0.2s ease;
}

.workflow-canvas .react-flow__edge:hover .react-flow__edge-path {
	stroke: var(--text-muted);
	stroke-width: 3;
}

/* Animated edges (during execution) */
.workflow-canvas .react-flow__edge.animated .react-flow__edge-path {
	stroke: var(--primary);
	stroke-dasharray: 8 4;
	animation: edge-flow 0.8s linear infinite;
}

@keyframes edge-flow {
	to {
		stroke-dashoffset: -12;
	}
}

.workflow-canvas .react-flow__background {
	background: var(--bg-base);
}

/* ─── Minimap Styling ────────────────────────────────────────────────────────── */

.workflow-canvas .workflow-minimap {
	bottom: var(--space-4) !important;
	right: var(--space-4) !important;
	border-radius: var(--radius-md);
	border: 1px solid var(--border);
	background: rgba(5, 5, 8, 0.85);
	backdrop-filter: blur(8px);
	box-shadow: var(--shadow-md);
	overflow: hidden;
	opacity: 0.8;
	transition: opacity 0.2s ease;
}

.workflow-canvas .workflow-minimap:hover {
	opacity: 1;
}

.workflow-canvas .workflow-minimap svg {
	border-radius: var(--radius-md);
}

/* Ensure minimap nodes are visible with category colors */
.workflow-canvas .react-flow__minimap-node {
	fill-opacity: 1;
	rx: 3;
	ry: 3;
}

/* ─── Empty State ────────────────────────────────────────────────────────────── */

.workflow-canvas-empty {
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	text-align: center;
	padding: var(--space-6);
	background: var(--bg-card);
	border: 1px dashed var(--border-light);
	border-radius: var(--radius-lg);
	color: var(--text-secondary);
	font-size: var(--text-base);
	max-width: 320px;
	z-index: var(--z-dropdown);
}

.workflow-canvas-empty p {
	margin: 0;
	line-height: var(--leading-relaxed);
}

/* ─── Drop Target Indicator ──────────────────────────────────────────────────── */

.workflow-canvas--drop-target {
	outline: 2px dashed var(--primary);
	outline-offset: -2px;
	background: color-mix(in srgb, var(--primary) 5%, transparent);
}

/* ─── Canvas Toolbar ─────────────────────────────────────────────────────────── */

.workflow-canvas-toolbar {
	position: absolute;
	top: var(--space-3);
	right: var(--space-3);
	z-index: var(--z-dropdown);
}

/* ─── React Flow Handles ─────────────────────────────────────────────────────── */

.workflow-canvas .react-flow__handle {
	width: 8px;
	height: 8px;
	background: var(--bg-surface);
	border: 2px solid var(--border-light);
	border-radius: var(--radius-full);
}

.workflow-canvas .react-flow__handle:hover {
	background: var(--primary);
	border-color: var(--primary);
}

.workflow-canvas .react-flow__handle-left {
	left: -4px;
}

.workflow-canvas .react-flow__handle-right {
	right: -4px;
}

/* ─── Selection Box ──────────────────────────────────────────────────────────── */

.workflow-canvas .react-flow__selection {
	background: var(--primary-dim);
	border: 1px solid var(--primary);
}

/* ─── Attribution Hide (we use our own) ──────────────────────────────────────── */

.workflow-canvas .react-flow__attribution {
	display: none;
}

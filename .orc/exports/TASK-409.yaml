version: 2
exported_at: 2026-01-17T22:16:29.396752381-06:00
task:
    id: TASK-409
    title: Create ModelBreakdownChart component
    description: |-
        Create a donut/pie chart showing cost breakdown by Claude model (Opus, Sonnet, Haiku).

        **COMPONENT INTERFACE:**
        ```typescript
        interface ModelBreakdownChartProps {
          data: {
            model: 'opus' | 'sonnet' | 'haiku';
            cost: number;
            tokens: number;
            percent: number;
          }[];
          total: number;
          period: string;
        }
        ```

        **VISUAL DESIGN (following example_ui/stats.html donut pattern):**
        ```
              ┌─────────────────┐
              │    Opus 76%     │
              │  ┌─────────┐    │
              │  │ $156.78 │    │
              │  │  total  │    │
              │  └─────────┘    │
              │  Sonnet  Haiku  │
              │   22%     2%    │
              └─────────────────┘
        ```

        **MODEL COLORS:**
        | Model | Color | Hex |
        |-------|-------|-----|
        | Opus | Purple | var(--primary) #a855f7 |
        | Sonnet | Cyan | var(--cyan) #06b6d4 |
        | Haiku | Orange | var(--orange) #f97316 |

        **IMPLEMENTATION OPTIONS:**
        1. CSS conic-gradient (lightweight, no deps)
        2. Recharts PieChart (interactive, tooltips)
        3. Chart.js doughnut (full-featured)

        **CSS APPROACH (preferred for simplicity):**
        ```css
        .donut-chart {
          width: 180px;
          height: 180px;
          border-radius: 50%;
          background: conic-gradient(
            var(--primary) 0deg 274deg,     /* 76% = 274deg */
            var(--cyan) 274deg 355deg,       /* 22% = 79deg */
            var(--orange) 355deg 360deg      /* 2% = 7deg */
          );
          position: relative;
        }

        .donut-hole {
          position: absolute;
          top: 50%; left: 50%;
          transform: translate(-50%, -50%);
          width: 120px; height: 120px;
          border-radius: 50%;
          background: var(--bg-card);
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
        }
        ```

        **LEGEND:**
        - Model name with color dot
        - Cost value
        - Percentage
        - Token count (on hover)

        **FILES TO CREATE:**
        - web/src/components/cost/ModelBreakdownChart.tsx

        **SUCCESS CRITERIA:**
        1. Renders donut with correct proportions
        2. Model colors match design system
        3. Center shows total cost
        4. Legend shows all models
        5. Hover/click shows detailed tooltip
        6. Handles edge cases (0 cost, single model)
    weight: small
    status: planned
    branch: orc/TASK-409
    queue: active
    priority: normal
    category: feature
    initiative_id: INIT-026
    blocked_by:
        - TASK-335
    created_at: 2026-01-16T23:01:21-06:00
    updated_at: 0001-01-01T00:00:00Z
plan:
    version: 1
    task_id: TASK-409
    weight: small
    description: Small task - implement with tests, fully automated
    phases:
        - id: implement
          name: implement
          prompt: |
            Implement the following task:

            **Task**: {{TASK_TITLE}}

            **Description**: {{TASK_DESCRIPTION}}

            {{RETRY_CONTEXT}}

            1. Implement the required changes
            2. Write/update tests as needed
            3. Run tests and fix any failures

            Keep iterating until implementation is complete and all tests pass.

            When done, output:
            <phase_complete>true</phase_complete>
          gate:
            type: auto
          checkpoint: true
          status: pending
        - id: test
          name: test
          prompt: |
            Final test verification for: {{TASK_TITLE}}

            **Original task**: {{TASK_DESCRIPTION}}

            1. Run the full test suite
            2. Fix any failures found
            3. Verify edge cases are covered

            Keep iterating until all tests pass.

            When done, output:
            <phase_complete>true</phase_complete>
          depends_on:
            - implement
          gate:
            type: auto
          checkpoint: true
          status: pending
state:
    task_id: TASK-409
    current_phase: ""
    current_iteration: 0
    status: pending
    started_at: 0001-01-01T00:00:00Z
    updated_at: 0001-01-01T00:00:00Z
    phases: {}
    tokens:
        input_tokens: 0
        output_tokens: 0
        total_tokens: 0
    cost:
        total_cost_usd: 0

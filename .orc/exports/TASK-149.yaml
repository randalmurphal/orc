version: 2
exported_at: 2026-01-16T23:27:38.85930164-06:00
task:
    id: TASK-149
    title: Add initiative status management to UI - complete/archive actions
    description: |-
        ## Problem
        There's no way to mark initiatives as completed or archived through the UI. The CLI has `orc initiative complete` but users should be able to manage initiative lifecycle from the web interface.

        ## Solution
        Add initiative status management to the UI:

        1. **Initiative Detail Page** (`/initiatives/[id]`):
           - Add status badge showing current status (draft/active/completed/archived)
           - Add action buttons/dropdown for status transitions:
             - Draft → Active (activate)
             - Active → Completed (complete)
             - Active → Archived (archive)
           - Confirm dialog for destructive actions (archive)

        2. **API Endpoints** (if not existing):
           - `PUT /api/initiatives/:id/status` with body `{status: 'completed'|'archived'|'active'}`
           - Or individual endpoints: `POST /api/initiatives/:id/complete`, etc.

        3. **Initiatives List**:
           - Show status badge on each initiative card
           - Optional: filter by status

        ## Success Criteria
        1. Users can mark initiative as completed from initiative detail page
        2. Users can archive initiatives from UI
        3. Status changes reflect immediately in UI
        4. API endpoints for status management exist and work
        5. Completed/archived initiatives visually distinct in lists

        ## Files to Modify
        - web/src/routes/initiatives/[id]/+page.svelte (add status actions)
        - web/src/lib/api.ts (add status change methods)
        - internal/api/handlers.go or similar (add/verify endpoints)
        - internal/api/routes.go (register endpoints if new)
    weight: small
    status: completed
    current_phase: test
    branch: orc/TASK-149
    queue: active
    priority: normal
    category: feature
    created_at: 2026-01-14T01:46:01-06:00
    updated_at: 2026-01-14T02:09:00-06:00
    started_at: 2026-01-14T01:55:26-06:00
    completed_at: 2026-01-14T02:09:00-06:00
plan:
    version: 1
    task_id: TASK-149
    weight: small
    description: Small task - implement with tests, fully automated
    phases:
        - id: implement
          name: implement
          prompt: |
            Implement the following task:

            **Task**: {{TASK_TITLE}}

            **Description**: {{TASK_DESCRIPTION}}

            {{RETRY_CONTEXT}}

            1. Implement the required changes
            2. Write/update tests as needed
            3. Run tests and fix any failures

            Keep iterating until implementation is complete and all tests pass.

            When done, output:
            <phase_complete>true</phase_complete>
          gate:
            type: auto
          checkpoint: true
          status: completed
          commit_sha: 6e3695f399b612bff3eb0d4835d3c193047d52bb
        - id: test
          name: test
          prompt: |
            Final test verification for: {{TASK_TITLE}}

            **Original task**: {{TASK_DESCRIPTION}}

            1. Run the full test suite
            2. Fix any failures found
            3. Verify edge cases are covered

            Keep iterating until all tests pass.

            When done, output:
            <phase_complete>true</phase_complete>
          depends_on:
            - implement
          gate:
            type: auto
          checkpoint: true
          status: completed
          commit_sha: 9ceb62e2fd27a7b84e6757521123d1d8d98670f3
state:
    task_id: TASK-149
    current_phase: test
    current_iteration: 0
    status: completed
    started_at: 2026-01-14T01:55:26-06:00
    updated_at: 0001-01-01T00:00:00Z
    phases:
        implement:
            status: completed
            started_at: 2026-01-14T01:55:26-06:00
            completed_at: 2026-01-14T02:01:03-06:00
            iterations: 2
            commit_sha: 6e3695f399b612bff3eb0d4835d3c193047d52bb
            tokens:
                input_tokens: 11184500
                output_tokens: 24022
                total_tokens: 0
        test:
            status: completed
            started_at: 2026-01-14T02:01:03-06:00
            completed_at: 2026-01-14T02:09:00-06:00
            iterations: 2
            commit_sha: 9ceb62e2fd27a7b84e6757521123d1d8d98670f3
            tokens:
                input_tokens: 1810295
                output_tokens: 5040
                total_tokens: 0
    gates:
        - phase: implement
          gate_type: auto
          approved: true
          reason: auto-approved on success
          timestamp: 2026-01-14T01:55:06-06:00
        - phase: implement
          gate_type: auto
          approved: true
          reason: auto-approved on success
          timestamp: 2026-01-14T02:01:03-06:00
        - phase: test
          gate_type: auto
          approved: true
          reason: auto-approved on success
          timestamp: 2026-01-14T02:09:00-06:00
    tokens:
        input_tokens: 0
        output_tokens: 0
        total_tokens: 0
    cost:
        total_cost_usd: 0
gate_decisions:
    - id: 5
      taskid: TASK-149
      phase: implement
      gatetype: auto
      approved: true
      reason: auto-approved on success
      decidedby: ""
      decidedat: 2026-01-14T01:55:06-06:00
    - id: 6
      taskid: TASK-149
      phase: implement
      gatetype: auto
      approved: true
      reason: auto-approved on success
      decidedby: ""
      decidedat: 2026-01-14T02:01:03-06:00
    - id: 7
      taskid: TASK-149
      phase: test
      gatetype: auto
      approved: true
      reason: auto-approved on success
      decidedby: ""
      decidedat: 2026-01-14T02:09:00-06:00

version: 2
exported_at: 2026-01-16T23:27:38.844882351-06:00
task:
    id: TASK-174
    title: 'Phase 2: React - Task Detail page with all tabs'
    description: |-
        ## Purpose
        Port the Task Detail page with all 6 tabs and sidebar.

        ## Components to Port

        ### TaskDetail page structure
        - TaskHeader with title, status, badges, edit/delete buttons
        - DependencySidebar (collapsible)
        - PR Actions button
        - Export dropdown
        - Tab navigation
        - Tab content panels

        ### TaskHeader.svelte -> TaskHeader.tsx
        - Task ID, weight badge, status badge, category badge
        - Edit task button (opens TaskEditModal)
        - Delete task button (with confirmation)

        ### DependencySidebar.svelte -> DependencySidebar.tsx
        - Blocked by section
        - Blocks section (computed)
        - Related section
        - Referenced by section (computed)
        - Add dependency modal

        ### Timeline Tab
        - Phase timeline visualization
        - Token usage stats panel
        - Iterations count

        ### Changes Tab (Diff Viewer)
        - DiffViewer with split/unified toggle
        - File list with expand/collapse
        - DiffFile, DiffHunk, DiffLine components
        - Virtual scrolling for large diffs
        - InlineCommentThread for review comments

        ### Transcript Tab
        - Transcript history list
        - Expandable content sections
        - Token counts per turn

        ### Test Results Tab
        - TestResults component
        - Screenshot gallery
        - Trace viewer links

        ### Attachments Tab
        - Attachment list/gallery
        - Upload functionality
        - Image preview modal

        ### Comments Tab
        - TaskCommentsPanel
        - TaskCommentThread, TaskCommentForm

        ## Success Criteria
        - All 6 tabs render correctly
        - Tab selection persists in URL (?tab=xxx)
        - Dependencies sidebar collapses/expands
        - E2E tests from Phase 0 pass
    weight: large
    status: completed
    branch: orc/TASK-174
    queue: active
    priority: normal
    category: feature
    initiative_id: INIT-005
    blocked_by:
        - TASK-164
        - TASK-165
        - TASK-169
        - TASK-170
    created_at: 2026-01-14T02:22:21-06:00
    updated_at: 2026-01-14T14:58:58-06:00
    started_at: 2026-01-14T14:58:58-06:00
plan:
    version: 1
    task_id: TASK-174
    weight: large
    description: Large task - spec, implement, test, validate with E2E testing
    phases:
        - id: spec
          name: spec
          prompt: |
            Create a specification for this large task:

            **Task**: {{TASK_TITLE}}

            **Description**: {{TASK_DESCRIPTION}}

            Define:
            1. Requirements and scope
            2. Technical approach
            3. Component breakdown (backend, frontend if applicable)
            4. API design (if applicable)
            5. Success criteria with explicit checkboxes
            6. Testing strategy:
               - Unit tests
               - Integration tests
               - E2E tests (using Playwright MCP tools if frontend exists)

            Include clear completion criteria:
            - What code must be written
            - What tests must pass
            - What E2E scenarios must work
            - What documentation must exist

            Keep iterating until the specification is clear and complete.

            When done, output:
            <phase_complete>true</phase_complete>
          gate:
            type: auto
          checkpoint: true
          status: pending
        - id: implement
          name: implement
          prompt: |
            Implement the large task according to the specification:

            **Task**: {{TASK_TITLE}}

            **Description**: {{TASK_DESCRIPTION}}

            **Specification**:
            {{SPEC_CONTENT}}

            {{RETRY_CONTEXT}}

            Implementation protocol:
            1. Implement all components defined in the spec
            2. Write unit tests alongside code
            3. Run tests frequently: `go test ./... -v -race`
            4. Fix failures before continuing
            5. If frontend exists:
               - Implement all components
               - Add loading/error states
               - Integrate with API

            Keep iterating until:
            - All components implemented
            - All unit tests pass
            - No race conditions

            When done, output:
            <phase_complete>true</phase_complete>
          depends_on:
            - spec
          gate:
            type: auto
          checkpoint: true
          status: pending
        - id: test
          name: test
          prompt: |
            Comprehensive testing for:

            **Task**: {{TASK_TITLE}}

            **Description**: {{TASK_DESCRIPTION}}

            ## Unit Tests
            1. Run: `go test ./... -v -race -cover`
            2. Verify coverage > 80%
            3. Fix any failures

            ## Integration Tests
            1. Test component interactions
            2. Test error handling paths
            3. Verify data flows correctly

            ## E2E Tests (If frontend exists - Use Playwright MCP tools)

            Setup:
            - Start backend server
            - Start frontend server

            Test using Playwright MCP:
            1. `mcp__playwright__browser_navigate` to app URL
            2. `mcp__playwright__browser_snapshot` to verify state
            3. `mcp__playwright__browser_click` to interact
            4. `mcp__playwright__browser_type` for input
            5. `mcp__playwright__browser_wait_for` for async operations

            Critical scenarios:
            - Happy path user flow
            - Error handling
            - Edge cases

            Keep iterating until all tests pass.

            When done, output:
            <phase_complete>true</phase_complete>
          depends_on:
            - implement
          gate:
            type: auto
          checkpoint: true
          status: pending
        - id: docs
          name: docs
          prompt: |
            Update documentation for:

            **Task**: {{TASK_TITLE}}

            **Description**: {{TASK_DESCRIPTION}}

            1. Update any relevant documentation files
            2. Ensure CLAUDE.md reflects the changes if applicable
            3. Add/update code comments where needed
            4. Update README if user-facing changes were made

            Keep iterating until documentation is complete.

            When done, output:
            <phase_complete>true</phase_complete>
          depends_on:
            - test
          gate:
            type: auto
          checkpoint: true
          status: pending
        - id: validate
          name: validate
          prompt: |
            Final validation for:

            **Task**: {{TASK_TITLE}}

            **Description**: {{TASK_DESCRIPTION}}

            ## Validation Checklist

            ### Code
            - [ ] All requirements from spec are met
            - [ ] Unit tests pass: `go test ./... -v -race`
            - [ ] Test coverage > 80%
            - [ ] No race conditions
            - [ ] Code quality acceptable (no debug statements, TODOs)

            ### Integration
            - [ ] Components work together
            - [ ] Error handling is complete
            - [ ] Performance is acceptable

            ### E2E (If frontend - MUST RUN with Playwright MCP)
            - [ ] Main user flows work
            - [ ] Error states handled
            - [ ] UI updates correctly

            ### Documentation
            - [ ] Code is documented where needed
            - [ ] CLAUDE.md updated if necessary
            - [ ] API documented if applicable

            ## Final Verification

            If frontend exists, run E2E verification:
            1. Start all servers
            2. Use Playwright MCP tools to test all features
            3. Verify everything works end-to-end

            Keep iterating until validation passes.

            When done, output:
            <phase_complete>true</phase_complete>
          depends_on:
            - docs
          gate:
            type: auto
          checkpoint: true
          status: pending
spec: |
    # Phase 2: React - Task Detail Page with All Tabs

    ## Overview

    Port the Task Detail page from Svelte to React 19, including all 6 tabs (Timeline, Changes, Transcript, Test Results, Attachments, Comments) and the Dependencies sidebar.

    ## Requirements

    ### Functional Requirements

    1. **Task Detail Page** (`/tasks/:id`)
       - Load task data, state, plan, and transcripts
       - Tab navigation with URL persistence (`?tab=xxx`)
       - Real-time updates via WebSocket subscription
       - Connection status banner for running tasks

    2. **TaskHeader Component**
       - Display: Task ID, weight badge, status indicator, category badge, initiative badge
       - Phase progress indicator (e.g., "2/6")
       - Actions: Edit (opens modal), Delete (with confirmation)
       - PR status display when PR exists

    3. **DependencySidebar Component**
       - Collapsible sidebar (expand/collapse toggle)
       - Sections: Blocked by, Blocks (computed), Related, Referenced by (computed)
       - Status indicators for each dependency (completed/running/pending)
       - Add/remove blockers and related tasks inline
       - AddDependencyModal for searching/selecting tasks

    4. **Timeline Tab** (default)
       - Horizontal phase execution flow
       - Phase status indicators (pending/running/completed/failed/skipped)
       - Duration display per phase
       - Token usage stats panel
       - Iteration/retry counts

    5. **Changes Tab** (Diff Viewer)
       - Split/unified view toggle
       - File list with expand/collapse
       - Diff visualization with line numbers
       - Syntax highlighting by file type
       - Virtual scrolling for large diffs
       - Review comments with severity (blocker/issue/suggestion)
       - "Send to Agent" for retriggering with feedback

    6. **Transcript Tab**
       - Paginated transcript history (10 per page)
       - Expandable content sections (prompt, response, retry context)
       - Token counts per turn (input/output/cached)
       - Live streaming content display
       - Export/copy functionality
       - Auto-scroll toggle

    7. **Test Results Tab**
       - Test report summary (passed/failed/skipped)
       - Test suite breakdown
       - Screenshot gallery with lightbox
       - Trace viewer links
       - HTML report link

    8. **Attachments Tab**
       - Drag-and-drop upload
       - Image gallery with lightbox
       - File list with metadata
       - Delete with confirmation

    9. **Comments Tab**
       - General task discussion
       - Phase-scoped filtering
       - Threaded comments with replies
       - Author type indicators (human/agent/system)

    ### Non-Functional Requirements

    - Match existing Svelte styling patterns (CSS modules)
    - Use existing React patterns from web-react/
    - Follow component structure conventions
    - Maintain feature parity with Svelte implementation

    ## Technical Approach

    ### Component Architecture

    ```
    pages/
      TaskDetail.tsx                    # Main page component

    components/task/
      TaskHeader.tsx                    # Header with actions
      TaskEditModal.tsx                 # Edit form modal
      DependencySidebar.tsx             # Dependencies panel
      AddDependencyModal.tsx            # Task search/select
      TabNav.tsx                        # Tab navigation
      Timeline.tsx                      # Phase timeline
      TokenStats.tsx                    # Token usage panel
      PRActions.tsx                     # PR creation/status
      ExportPanel.tsx                   # Export options
      Attachments.tsx                   # Attachments tab
      TestResults.tsx                   # Test results tab

    components/diff/
      DiffViewer.tsx                    # Main diff container
      DiffFile.tsx                      # File diff wrapper
      DiffHunk.tsx                      # Hunk with context
      DiffLine.tsx                      # Single line
      DiffStats.tsx                     # Summary stats
      InlineCommentThread.tsx           # Review comments
      VirtualScroller.tsx               # Performance optimization

    components/transcript/
      Transcript.tsx                    # Main transcript view
      TranscriptEntry.tsx               # Single transcript file
      StreamingContent.tsx              # Live streaming display

    components/comments/
      TaskCommentsPanel.tsx             # Comments container
      TaskCommentThread.tsx             # Thread with replies
      TaskCommentForm.tsx               # Comment creation
    ```

    ### State Management

    Use existing stores:
    - `useTaskStore` - Task data, execution state
    - `useProjectStore` - Project context

    Add to lib/types.ts:
    - `TranscriptFile` interface
    - `DiffResult`, `FileDiff`, `DiffHunk`, `DiffLine` interfaces
    - `ReviewComment` interface
    - `TaskComment` interface
    - `Attachment` interface
    - `TestResultsInfo` interface

    ### API Integration

    Endpoints to integrate:
    ```
    GET  /api/tasks/:id                      # Task metadata
    GET  /api/tasks/:id/state                # Execution state
    GET  /api/tasks/:id/plan                 # Phase plan
    GET  /api/tasks/:id/transcripts          # Transcript files
    GET  /api/tasks/:id/diff                 # Git diff
    GET  /api/tasks/:id/diff/stats           # Diff stats only
    GET  /api/tasks/:id/diff/file/:path      # Single file diff
    GET  /api/tasks/:id/dependencies         # Dependency graph
    GET  /api/tasks/:id/attachments          # Attachment list
    POST /api/tasks/:id/attachments          # Upload attachment
    GET  /api/tasks/:id/test-results         # Test results
    GET  /api/tasks/:id/comments             # Task comments
    POST /api/tasks/:id/comments             # Create comment
    PATCH /api/tasks/:id                     # Update task
    DELETE /api/tasks/:id                    # Delete task
    POST /api/tasks/:id/run                  # Start task
    POST /api/tasks/:id/pause                # Pause task
    POST /api/tasks/:id/resume               # Resume task
    POST /api/tasks/:id/finalize             # Trigger finalize
    ```

    ### WebSocket Integration

    Use existing `useWebSocket` and `useTaskSubscription` hooks:
    - Subscribe to task on mount
    - Handle events: state, transcript, tokens, phase, complete, finalize
    - Update local state from events
    - Show connection status banner when disconnected

    ### URL State

    Tab persistence pattern:
    ```tsx
    const [searchParams, setSearchParams] = useSearchParams();
    const activeTab = searchParams.get('tab') ?? 'timeline';

    const handleTabChange = (tab: TabId) => {
      setSearchParams(prev => {
        prev.set('tab', tab);
        return prev;
      }, { replace: true });
    };
    ```

    ### Styling

    Follow existing patterns:
    - Component-scoped CSS files
    - CSS custom properties from existing theme
    - BEM-like class naming
    - Animation patterns for running/pulsing states

    ## Component Breakdown

    ### Phase 1: Core Page Structure (TaskDetail, TaskHeader, TabNav)

    | Component | Lines Est. | Dependencies |
    |-----------|------------|--------------|
    | TaskDetail.tsx | 200-250 | TaskHeader, TabNav, DependencySidebar |
    | TaskHeader.tsx | 150-200 | StatusIndicator, Icon, TaskEditModal |
    | TabNav.tsx | 80-100 | Icon |
    | TaskEditModal.tsx | 150-180 | Modal |

    ### Phase 2: Timeline Tab

    | Component | Lines Est. | Dependencies |
    |-----------|------------|--------------|
    | Timeline.tsx | 150-200 | StatusIndicator |
    | TokenStats.tsx | 80-100 | - |

    ### Phase 3: Transcript Tab

    | Component | Lines Est. | Dependencies |
    |-----------|------------|--------------|
    | Transcript.tsx | 200-250 | TranscriptEntry, StreamingContent |
    | TranscriptEntry.tsx | 100-120 | Icon |
    | StreamingContent.tsx | 60-80 | - |

    ### Phase 4: Changes Tab (Diff Viewer)

    | Component | Lines Est. | Dependencies |
    |-----------|------------|--------------|
    | DiffViewer.tsx | 200-250 | DiffFile, DiffStats |
    | DiffFile.tsx | 100-120 | DiffHunk |
    | DiffHunk.tsx | 80-100 | DiffLine |
    | DiffLine.tsx | 50-60 | InlineCommentThread |
    | DiffStats.tsx | 40-50 | - |
    | InlineCommentThread.tsx | 120-150 | - |
    | VirtualScroller.tsx | 100-120 | - |

    ### Phase 5: Remaining Tabs

    | Component | Lines Est. | Dependencies |
    |-----------|------------|--------------|
    | TestResults.tsx | 150-180 | Icon |
    | Attachments.tsx | 180-220 | Icon, Modal |
    | TaskCommentsPanel.tsx | 150-180 | TaskCommentThread, TaskCommentForm |
    | TaskCommentThread.tsx | 80-100 | - |
    | TaskCommentForm.tsx | 60-80 | - |

    ### Phase 6: Dependencies Sidebar

    | Component | Lines Est. | Dependencies |
    |-----------|------------|--------------|
    | DependencySidebar.tsx | 200-250 | AddDependencyModal, StatusIndicator |
    | AddDependencyModal.tsx | 150-180 | Modal, Icon |

    ## API Design

    No new backend APIs required - all endpoints exist. Frontend uses:

    ```typescript
    // lib/api.ts additions
    export async function getTask(id: string): Promise<Task>;
    export async function getTaskState(id: string): Promise<TaskState>;
    export async function getTaskPlan(id: string): Promise<Plan>;
    export async function getTranscripts(id: string): Promise<TranscriptFile[]>;
    export async function getTaskDiff(id: string, options?: { files?: boolean; base?: string }): Promise<DiffResult>;
    export async function getTaskDiffStats(id: string): Promise<DiffStats>;
    export async function getTaskFileDiff(id: string, path: string): Promise<FileDiff>;
    export async function getTaskDependencies(id: string): Promise<DependencyGraph>;
    export async function addBlocker(taskId: string, blockerId: string): Promise<Task>;
    export async function removeBlocker(taskId: string, blockerId: string): Promise<Task>;
    export async function addRelated(taskId: string, relatedId: string): Promise<Task>;
    export async function removeRelated(taskId: string, relatedId: string): Promise<Task>;
    export async function getAttachments(id: string): Promise<Attachment[]>;
    export async function uploadAttachment(id: string, file: File): Promise<Attachment>;
    export async function deleteAttachment(id: string, filename: string): Promise<void>;
    export async function getTestResults(id: string): Promise<TestResultsInfo>;
    export async function getTaskComments(id: string, options?: { author_type?: string; phase?: string }): Promise<TaskComment[]>;
    export async function createTaskComment(id: string, data: CreateCommentInput): Promise<TaskComment>;
    export async function updateTaskComment(taskId: string, commentId: string, data: UpdateCommentInput): Promise<TaskComment>;
    export async function deleteTaskComment(taskId: string, commentId: string): Promise<void>;
    export async function updateTask(id: string, updates: TaskUpdateInput): Promise<Task>;
    export async function deleteTask(id: string): Promise<void>;
    export async function runTask(id: string, options?: { force?: boolean }): Promise<RunTaskResponse>;
    export async function pauseTask(id: string): Promise<void>;
    export async function resumeTask(id: string): Promise<void>;
    export async function triggerFinalize(id: string): Promise<FinalizeResponse>;
    export async function getFinalizeStatus(id: string): Promise<FinalizeStatus>;
    ```

    ## Success Criteria

    ### Must Have

    - [ ] TaskDetail page loads and displays task data
    - [ ] Tab navigation works with URL persistence
    - [ ] Timeline tab shows phase progression with status
    - [ ] Changes tab displays git diff with file list
    - [ ] Transcript tab shows paginated history
    - [ ] Test Results tab shows test summary
    - [ ] Attachments tab lists files with upload capability
    - [ ] Comments tab shows threaded discussions
    - [ ] DependencySidebar shows all 4 relationship types
    - [ ] WebSocket subscription updates UI in real-time
    - [ ] Task actions (run/pause/resume/delete) work
    - [ ] Edit modal updates task fields
    - [ ] Connection status banner appears when disconnected

    ### Should Have

    - [ ] Diff viewer split/unified toggle
    - [ ] Virtual scrolling for large diffs
    - [ ] Live streaming content in Transcript tab
    - [ ] Screenshot lightbox in Test Results
    - [ ] Drag-drop upload in Attachments
    - [ ] Review comment "Send to Agent" functionality

    ### Nice to Have

    - [ ] Keyboard navigation within diff viewer
    - [ ] Syntax highlighting in diff viewer
    - [ ] Comment filtering by phase
    - [ ] Export functionality

    ## Testing Strategy

    ### Unit Tests (Vitest)

    | Component | Test Coverage |
    |-----------|---------------|
    | TaskHeader | Actions trigger callbacks, badge rendering |
    | TabNav | Tab selection, keyboard navigation, ARIA |
    | Timeline | Phase status display, duration formatting |
    | TokenStats | Token count formatting, cache display |
    | DiffViewer | View mode toggle, file expansion |
    | DiffLine | Line type styling, click handlers |
    | Transcript | Pagination, content expansion |
    | DependencySidebar | Section rendering, add/remove handlers |

    ### Integration Tests

    1. **TaskDetail data flow**
       - Task data loads from API
       - State updates from WebSocket
       - Tab content lazy loads

    2. **Form interactions**
       - Edit modal saves changes
       - Delete confirms and navigates
       - Attachment upload works

    3. **WebSocket integration**
       - Subscribes on mount
       - Handles disconnect/reconnect
       - Updates task state from events

    ### E2E Tests (Playwright)

    ```typescript
    // Task detail navigation and tabs
    test('navigates to task detail and switches tabs', async ({ page }) => {
      await page.goto('/tasks/TASK-001');
      await expect(page.getByRole('heading', { name: /TASK-001/ })).toBeVisible();

      // Check all tabs accessible
      await page.getByRole('tab', { name: 'Changes' }).click();
      await expect(page.url()).toContain('tab=changes');

      await page.getByRole('tab', { name: 'Transcript' }).click();
      await expect(page.url()).toContain('tab=transcript');
    });

    // Task actions
    test('runs and pauses task', async ({ page }) => {
      await page.goto('/tasks/TASK-001');
      await page.getByRole('button', { name: 'Run' }).click();
      await expect(page.getByText('running')).toBeVisible();

      await page.getByRole('button', { name: 'Pause' }).click();
      await expect(page.getByText('paused')).toBeVisible();
    });

    // Dependencies sidebar
    test('adds and removes blocker', async ({ page }) => {
      await page.goto('/tasks/TASK-003');
      await page.getByRole('button', { name: 'Add blocker' }).click();
      await page.getByRole('textbox').fill('TASK-001');
      await page.getByRole('option', { name: /TASK-001/ }).click();
      await expect(page.getByText('TASK-001')).toBeVisible();
    });

    // Edit modal
    test('edits task via modal', async ({ page }) => {
      await page.goto('/tasks/TASK-001');
      await page.getByRole('button', { name: 'Edit' }).click();
      await page.getByLabel('Title').fill('Updated Title');
      await page.getByRole('button', { name: 'Save' }).click();
      await expect(page.getByRole('heading', { name: /Updated Title/ })).toBeVisible();
    });

    // Diff viewer
    test('toggles diff view mode', async ({ page }) => {
      await page.goto('/tasks/TASK-001?tab=changes');
      await page.getByRole('button', { name: 'Unified' }).click();
      await expect(page.locator('.diff-viewer.unified')).toBeVisible();

      await page.getByRole('button', { name: 'Split' }).click();
      await expect(page.locator('.diff-viewer.split')).toBeVisible();
    });

    // Attachments
    test('uploads attachment', async ({ page }) => {
      await page.goto('/tasks/TASK-001?tab=attachments');
      const fileInput = page.locator('input[type="file"]');
      await fileInput.setInputFiles({
        name: 'test.png',
        mimeType: 'image/png',
        buffer: Buffer.from('fake image data')
      });
      await expect(page.getByText('test.png')).toBeVisible();
    });
    ```

    ### Test File Mapping

    | Component | Test File |
    |-----------|-----------|
    | TaskDetail.tsx | TaskDetail.test.tsx |
    | TaskHeader.tsx | TaskHeader.test.tsx |
    | TabNav.tsx | TabNav.test.tsx |
    | Timeline.tsx | Timeline.test.tsx |
    | DiffViewer.tsx | DiffViewer.test.tsx |
    | Transcript.tsx | Transcript.test.tsx |
    | DependencySidebar.tsx | DependencySidebar.test.tsx |
    | Attachments.tsx | Attachments.test.tsx |
    | TestResults.tsx | TestResults.test.tsx |
    | TaskCommentsPanel.tsx | TaskCommentsPanel.test.tsx |

    ## Documentation Requirements

    1. Update `web-react/CLAUDE.md`:
       - Add TaskDetail page section
       - Document all new components
       - Add API functions to lib/api.ts section
       - Update component mapping table

    2. Component JSDoc headers:
       - Purpose and features
       - Props interface
       - Usage examples

    ## Implementation Order

    1. **Core structure** (3-4 hours)
       - TaskDetail.tsx (page shell)
       - TaskHeader.tsx
       - TabNav.tsx
       - TaskEditModal.tsx

    2. **Timeline Tab** (2 hours)
       - Timeline.tsx
       - TokenStats.tsx

    3. **Transcript Tab** (2-3 hours)
       - Transcript.tsx
       - TranscriptEntry.tsx
       - StreamingContent.tsx

    4. **Changes Tab** (4-5 hours)
       - DiffViewer.tsx
       - DiffFile.tsx
       - DiffHunk.tsx
       - DiffLine.tsx
       - DiffStats.tsx
       - InlineCommentThread.tsx
       - VirtualScroller.tsx

    5. **Remaining Tabs** (3-4 hours)
       - TestResults.tsx
       - Attachments.tsx
       - TaskCommentsPanel.tsx
       - TaskCommentThread.tsx
       - TaskCommentForm.tsx

    6. **Dependencies Sidebar** (2-3 hours)
       - DependencySidebar.tsx
       - AddDependencyModal.tsx

    7. **Testing & Polish** (3-4 hours)
       - Unit tests
       - E2E tests
       - Documentation updates

    ## Risks and Mitigations

    | Risk | Mitigation |
    |------|------------|
    | Diff viewer performance with large diffs | Implement virtual scrolling, lazy-load file hunks |
    | WebSocket reconnection complexity | Use existing hooks, tested patterns |
    | Tab state desync with URL | Use searchParams as source of truth |
    | Streaming content accumulation | Clear buffer on phase/iteration change |

    ## Dependencies

    - Existing: Modal, Icon, StatusIndicator, toast
    - API client functions (to be added)
    - WebSocket hooks (useWebSocket, useTaskSubscription)
    - CSS custom properties (existing theme)

    ## Out of Scope

    - PR creation flow (separate task)
    - Finalize modal (already exists in board)
    - Live transcript modal (already exists)
    - Task creation (separate task)

    ---

    **Estimated Total Effort:** 20-25 hours

    **Files to Create:** ~25 component files + ~10 test files + CSS files

    **Lines of Code:** ~3000-4000 (components) + ~1500 (tests)
state:
    task_id: TASK-174
    current_phase: ""
    current_iteration: 0
    status: pending
    started_at: 2026-01-14T14:58:58-06:00
    updated_at: 0001-01-01T00:00:00Z
    phases: {}
    tokens:
        input_tokens: 0
        output_tokens: 0
        total_tokens: 0
    cost:
        total_cost_usd: 0

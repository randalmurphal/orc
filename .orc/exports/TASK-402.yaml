version: 2
exported_at: 2026-01-16T23:27:36.887266391-06:00
task:
    id: TASK-402
    title: Create TranscriptSection component for collapsible content blocks
    description: |-
        Create a TranscriptSection component for displaying collapsible transcript sections (prompt, response, tool calls).

        **COMPONENT INTERFACE:**
        ```typescript
        interface TranscriptSectionProps {
          section: {
            id: number;
            type: 'prompt' | 'response' | 'tool_call' | 'tool_result' | 'error' | 'metadata';
            content: string;
            timestamp: string;
            tokens?: { input: number; output: number };
          };
          defaultExpanded?: boolean;
          onToggle?: (expanded: boolean) => void;
        }
        ```

        **VISUAL DESIGN:**
        ```
        ┌─────────────────────────────────────────────────────────────┐
        │ ▼ Response                                   14:32:05  2.5K │
        ├─────────────────────────────────────────────────────────────┤
        │ I'll implement the pagination feature...                    │
        │                                                             │
        │ ```typescript                                              │
        │ function paginate(items: T[], page: number) {               │
        │   return items.slice(page * 10, (page + 1) * 10);          │
        │ }                                                           │
        │ ```                                              [Copy]    │
        │                                                             │
        └─────────────────────────────────────────────────────────────┘
        ```

        **SECTION TYPE STYLING:**
        | Type | Icon | Header Color | Border |
        |------|------|--------------|--------|
        | prompt | MessageSquare | text-primary | border-left: 2px primary |
        | response | Bot | text-secondary | border-left: 2px cyan |
        | tool_call | Terminal | text-muted | border-left: 2px amber |
        | tool_result | CheckCircle | text-muted | border-left: 2px green |
        | error | AlertTriangle | red | border-left: 2px red |

        **FEATURES:**
        1. Collapsible with smooth animation
        2. Syntax highlighting for code blocks (use Shiki or Prism)
        3. Copy button for code blocks
        4. Token count in header
        5. Timestamp in header
        6. Monospace font for content

        **CSS:**
        ```css
        .transcript-section {
          border: 1px solid var(--border);
          border-radius: 8px;
          margin-bottom: 8px;
          overflow: hidden;
        }

        .section-header {
          display: flex;
          justify-content: space-between;
          padding: 8px 12px;
          background: var(--bg-surface);
          cursor: pointer;
        }

        .section-content {
          padding: 12px;
          font-family: var(--font-mono);
          font-size: var(--text-sm);
          white-space: pre-wrap;
          max-height: 400px;
          overflow-y: auto;
        }
        ```

        **FILES TO CREATE:**
        - web/src/components/transcript/TranscriptSection.tsx

        **SUCCESS CRITERIA:**
        1. All section types render with correct styling
        2. Collapse/expand works with animation
        3. Code blocks have syntax highlighting
        4. Copy button works
        5. Scrollable content for long sections
    weight: small
    status: planned
    branch: orc/TASK-402
    queue: active
    priority: normal
    category: feature
    initiative_id: INIT-025
    blocked_by:
        - TASK-335
    created_at: 2026-01-16T22:58:33-06:00
    updated_at: 0001-01-01T00:00:00Z
plan:
    version: 1
    task_id: TASK-402
    weight: small
    description: Small task - implement with tests, fully automated
    phases:
        - id: implement
          name: implement
          prompt: |
            Implement the following task:

            **Task**: {{TASK_TITLE}}

            **Description**: {{TASK_DESCRIPTION}}

            {{RETRY_CONTEXT}}

            1. Implement the required changes
            2. Write/update tests as needed
            3. Run tests and fix any failures

            Keep iterating until implementation is complete and all tests pass.

            When done, output:
            <phase_complete>true</phase_complete>
          gate:
            type: auto
          checkpoint: true
          status: pending
        - id: test
          name: test
          prompt: |
            Final test verification for: {{TASK_TITLE}}

            **Original task**: {{TASK_DESCRIPTION}}

            1. Run the full test suite
            2. Fix any failures found
            3. Verify edge cases are covered

            Keep iterating until all tests pass.

            When done, output:
            <phase_complete>true</phase_complete>
          depends_on:
            - implement
          gate:
            type: auto
          checkpoint: true
          status: pending
state:
    task_id: TASK-402
    current_phase: ""
    current_iteration: 0
    status: pending
    started_at: 0001-01-01T00:00:00Z
    updated_at: 0001-01-01T00:00:00Z
    phases: {}
    tokens:
        input_tokens: 0
        output_tokens: 0
        total_tokens: 0
    cost:
        total_cost_usd: 0

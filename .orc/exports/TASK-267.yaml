version: 2
exported_at: 2026-01-16T23:27:37.020504489-06:00
task:
    id: TASK-267
    title: Expand Task Info panel with more metadata
    description: |-
        ## Problem
        The Task Info panel in task detail shows minimal information:
        - Weight: small
        - Status: planned
        - Created: Jan 15, 2026

        Missing important metadata that exists on the task.

        ## Should Also Include
        - Priority (critical/high/normal/low)
        - Category (feature/bug/refactor/etc.)
        - Queue (active/backlog)
        - Initiative (with link)
        - Last updated timestamp
        - Blocked by count (if any)
        - Branch name (currently shown elsewhere but fits here too)

        ## Location
        - components/task-detail/TimelineTab.tsx (Task Info section)

        ## Technical Notes
        - Panel has room for more rows
        - Match formatting of existing dt/dd pairs
    weight: medium
    status: completed
    current_phase: docs
    branch: orc/TASK-267
    queue: active
    priority: low
    category: feature
    initiative_id: INIT-013
    created_at: 2026-01-15T23:18:14-06:00
    updated_at: 2026-01-16T03:52:28-06:00
    started_at: 2026-01-16T03:26:00-06:00
    completed_at: 2026-01-16T03:52:28-06:00
    metadata:
        pr_url: https://github.com/randalmurphal/orc/pull/162
plan:
    version: 1
    task_id: TASK-267
    weight: medium
    description: Medium task - spec, implement, test, docs with clear success criteria
    phases:
        - id: spec
          name: spec
          prompt: |
            Create a specification for this task:

            **Task**: {{TASK_TITLE}}
            **Category**: {{TASK_CATEGORY}}
            **Description**: {{TASK_DESCRIPTION}}

            {{INITIATIVE_CONTEXT}}

            ## Instructions

            Create a clear, actionable specification that defines exactly what needs to be done
            and how to verify it's complete.

            ### 1. Problem Statement
            Summarize what needs to be solved in 1-2 sentences.

            ### 2. Success Criteria (REQUIRED)
            Define specific, testable criteria as checkboxes:
            - Each criterion must be verifiable (file exists, test passes, API returns X)
            - No vague language ("works well", "is fast")
            - Include both functional and quality criteria

            ### 3. Testing Requirements (REQUIRED)
            Specify what tests must pass:
            - [ ] Unit test: [specific test description]
            - [ ] Integration test: [if applicable]
            - [ ] E2E test: [if UI changes]

            ### 4. Scope
            Define boundaries to prevent scope creep:
            - **In Scope**: What will be implemented
            - **Out of Scope**: What will NOT be implemented

            ### 5. Technical Approach
            Brief plan for implementation:
            - Files to modify
            - Key changes in each file

            ### 6. Category-Specific Analysis

            **If this is a BUG (category=bug):**
            - Reproduction Steps: Exact steps to trigger the bug
            - Current Behavior: What happens now (the bug)
            - Expected Behavior: What should happen
            - Root Cause: Where the bug originates (if known)
            - Verification: How to confirm the fix works

            **If this is a FEATURE (category=feature):**
            - User Story: As a [user], I want [feature] so that [benefit]
            - Acceptance Criteria: Specific conditions for feature acceptance

            **If this is a REFACTOR (category=refactor):**
            - Before Pattern: Current code/architecture
            - After Pattern: Target code/architecture
            - Risk Assessment: What could break

            ## Output Format

            Wrap your spec in artifact tags:

            <artifact>
            # Specification: {{TASK_TITLE}}

            ## Problem Statement
            [1-2 sentences]

            ## Success Criteria
            - [ ] [Criterion 1]
            - [ ] [Criterion 2]

            ## Testing Requirements
            - [ ] [Test 1]
            - [ ] [Test 2]

            ## Scope
            ### In Scope
            - [Item]
            ### Out of Scope
            - [Item]

            ## Technical Approach
            [Brief implementation plan]

            ### Files to Modify
            - [file]: [change]

            ## [Category-Specific Section]
            [Include appropriate section based on category]
            </artifact>

            After completing the spec, commit:
            ```bash
            git add -A
            git commit -m "[orc] {{TASK_ID}}: spec - completed"
            ```

            Then output:
            ```
            **Commit**: [SHA]
            <phase_complete>true</phase_complete>
            ```

            If blocked (requirements unclear):
            ```
            <phase_blocked>
            reason: [what's unclear]
            needs: [what clarification is needed]
            </phase_blocked>
            ```
          gate:
            type: auto
          checkpoint: true
          status: completed
          commit_sha: f4ce0058fd38533f95cc40afaa0dce2ade3ea8ce
        - id: implement
          name: implement
          prompt: |
            Implement the task according to the specification:

            **Task**: {{TASK_TITLE}}
            **Category**: {{TASK_CATEGORY}}

            {{INITIATIVE_CONTEXT}}

            ## Specification

            {{SPEC_CONTENT}}

            {{RETRY_CONTEXT}}

            ## Instructions

            1. Review the spec's success criteria - these are your acceptance criteria
            2. Implement the required changes following the technical approach
            3. Write/update tests alongside code (as specified in Testing Requirements)
            4. Run tests and fix any failures
            5. Self-review against success criteria before completing

            ### Self-Review Checklist
            - [ ] All success criteria from spec addressed
            - [ ] All testing requirements satisfied
            - [ ] Scope boundaries respected (no extra features)
            - [ ] Error handling complete
            - [ ] Code follows project patterns

            Keep iterating until implementation is complete and tests pass.

            After completing, commit:
            ```bash
            git add -A
            git commit -m "[orc] {{TASK_ID}}: implement - completed"
            ```

            When done, output:
            ```
            **Commit**: [SHA]
            <phase_complete>true</phase_complete>
            ```
          depends_on:
            - spec
          gate:
            type: auto
          checkpoint: true
          status: completed
          commit_sha: 3d95f4428c807539431f7ce64353a465c8bb66ce
        - id: test
          name: test
          prompt: |
            Test and review the implementation:

            **Task**: {{TASK_TITLE}}
            **Category**: {{TASK_CATEGORY}}

            ## Specification

            {{SPEC_CONTENT}}

            ## Instructions

            1. Run the full test suite
            2. Verify all Testing Requirements from spec are satisfied
            3. Review code for quality issues
            4. Check for edge cases and security issues
            5. Fix any problems found

            ### Verification Against Spec
            Go through each Success Criterion and Testing Requirement from the spec
            and verify it's satisfied.

            Keep iterating until all tests pass and code quality is acceptable.

            After completing, commit:
            ```bash
            git add -A
            git commit -m "[orc] {{TASK_ID}}: test - completed"
            ```

            When done, output:
            ```
            **Commit**: [SHA]
            <phase_complete>true</phase_complete>
            ```
          depends_on:
            - implement
          gate:
            type: auto
          checkpoint: true
          status: completed
          commit_sha: 8ae3699f9d6e4c132e55ef984796df95534fa362
        - id: docs
          name: docs
          prompt: |
            Update documentation for:

            **Task**: {{TASK_TITLE}}
            **Category**: {{TASK_CATEGORY}}

            ## Specification

            {{SPEC_CONTENT}}

            ## Instructions

            1. Update any relevant documentation files
            2. Ensure CLAUDE.md reflects the changes if applicable
            3. Add/update code comments where needed
            4. Update README if user-facing changes were made

            Keep iterating until documentation is complete.

            After completing, commit:
            ```bash
            git add -A
            git commit -m "[orc] {{TASK_ID}}: docs - completed"
            ```

            When done, output:
            ```
            **Commit**: [SHA]
            <phase_complete>true</phase_complete>
            ```
          depends_on:
            - test
          gate:
            type: auto
          checkpoint: true
          status: completed
          commit_sha: 4e9f1e2bde08cdf56029e2ef011c502d7add2355
spec: |-
    # Specification: Expand Task Info panel with more metadata

    ## Problem Statement

    The Task Info panel in TimelineTab shows only basic information (weight, status, created date, timestamps), missing important task metadata that users need for context: priority, category, queue, initiative, last updated, blocked_by count, and branch name.

    ## Success Criteria

    - [ ] Priority field displayed with appropriate styling (critical/high/normal/low)
    - [ ] Category field displayed with icon matching TaskHeader pattern
    - [ ] Queue field displayed (active/backlog)
    - [ ] Initiative field displayed as clickable link to initiative page (when set)
    - [ ] Updated timestamp displayed showing last modification time
    - [ ] Blocked by count displayed when task has blockers (e.g., "2 tasks")
    - [ ] Branch name displayed with code formatting (currently shown elsewhere but fits here)
    - [ ] All new fields match existing dt/dd pair formatting
    - [ ] All new fields conditionally render (skip if value is undefined/null)
    - [ ] Styling consistent with existing info-item pattern

    ## Testing Requirements

    - [ ] Unit test: TimelineTab renders priority field with correct styling class
    - [ ] Unit test: TimelineTab renders category field with correct icon
    - [ ] Unit test: TimelineTab renders initiative as clickable link
    - [ ] Unit test: TimelineTab renders blocked_by count when blockers exist
    - [ ] Unit test: TimelineTab hides optional fields when not set
    - [ ] E2E test: Task detail page displays all metadata fields correctly

    ## Scope

    ### In Scope
    - Adding priority, category, queue, initiative, updated_at, blocked_by count, and branch to Task Info section
    - Matching existing styling patterns (dt/dd pairs, status colors)
    - Making initiative a clickable link to `/initiatives/:id`
    - Conditional rendering for optional fields

    ### Out of Scope
    - Modifying the info-item CSS styling (use existing)
    - Adding edit functionality within Task Info panel (TaskEditModal handles edits)
    - Adding dependency management UI (DependencySidebar handles this)
    - Changing the layout or position of Task Info panel

    ## Technical Approach

    The Task Info section in TimelineTab.tsx needs additional fields. All required data is already available on the `task` prop. The initiative link requires importing `Link` from react-router-dom and `getInitiativeBadgeTitle` from stores (following TaskHeader.tsx pattern).

    ### Files to Modify

    1. **web/src/components/task-detail/TimelineTab.tsx**
       - Import `Link` from react-router-dom
       - Import `Icon` (already imported)
       - Import `getInitiativeBadgeTitle` from `@/stores`
       - Import `CATEGORY_CONFIG`, `PRIORITY_CONFIG` from `@/lib/types`
       - Add priority field with priority-specific class
       - Add category field with icon
       - Add queue field
       - Add initiative field as Link
       - Add updated_at field (using existing `formatDate` helper)
       - Add blocked_by count field
       - Add branch field with code tag

    2. **web/src/components/task-detail/TimelineTab.css**
       - Add priority-specific color classes (matching TaskHeader pattern)
       - Add category-color styling
       - Add initiative link styling (clickable, underline on hover)
       - Add branch code styling

    3. **web/src/components/task-detail/TimelineTab.test.tsx** (new file)
       - Unit tests for new metadata fields
       - Mock store for initiative badge lookup

    ## Feature Details

    ### User Story
    As a user viewing a task's timeline, I want to see comprehensive task metadata in the Task Info panel so that I have full context without navigating to other views.

    ### Acceptance Criteria

    1. **Priority** - Displays the task priority with color coding:
       - critical: red/error color
       - high: orange/warning color
       - normal: muted text
       - low: muted text

    2. **Category** - Displays task category with matching icon:
       - feature: sparkles icon, green
       - bug: bug icon, red
       - refactor: recycle icon, blue
       - chore: tools icon, muted
       - docs: file-text icon, orange
       - test: beaker icon, accent color

    3. **Queue** - Displays "active" or "backlog"

    4. **Initiative** - When task has `initiative_id`:
       - Displays initiative badge (from `getInitiativeBadgeTitle`)
       - Clickable link navigating to `/initiatives/:id`
       - Shows layers icon

    5. **Updated** - Displays `updated_at` timestamp in same format as created_at

    6. **Blocked By** - When `blocked_by` array has items:
       - Shows count: "N task(s)"
       - Links to DependencySidebar (or just informational)

    7. **Branch** - Displays branch name in `<code>` tags matching phase-commit styling

    ### Field Order
    1. Weight (existing)
    2. Status (existing)
    3. Priority (new)
    4. Category (new)
    5. Queue (new)
    6. Initiative (new)
    7. Blocked By (new, conditional)
    8. Branch (new)
    9. Retries (existing, conditional)
    10. Created (existing)
    11. Updated (new)
    12. Started (existing, conditional)
    13. Completed (existing, conditional)
state:
    task_id: TASK-267
    current_phase: docs
    current_iteration: 0
    status: completed
    started_at: 2026-01-16T03:26:00-06:00
    updated_at: 0001-01-01T00:00:00Z
    phases:
        docs:
            status: completed
            started_at: 2026-01-16T03:51:36-06:00
            completed_at: 2026-01-16T03:52:28-06:00
            iterations: 1
            commit_sha: 4e9f1e2bde08cdf56029e2ef011c502d7add2355
            tokens:
                input_tokens: 487082
                output_tokens: 1637
                total_tokens: 0
        implement:
            status: completed
            started_at: 2026-01-16T03:27:37-06:00
            completed_at: 2026-01-16T03:30:56-06:00
            iterations: 1
            commit_sha: 3d95f4428c807539431f7ce64353a465c8bb66ce
            tokens:
                input_tokens: 2363811
                output_tokens: 8403
                total_tokens: 0
        spec:
            status: completed
            started_at: 2026-01-16T03:26:02-06:00
            completed_at: 2026-01-16T03:27:37-06:00
            iterations: 1
            commit_sha: f4ce0058fd38533f95cc40afaa0dce2ade3ea8ce
            tokens:
                input_tokens: 753561
                output_tokens: 5462
                total_tokens: 0
        test:
            status: completed
            started_at: 2026-01-16T03:30:56-06:00
            completed_at: 2026-01-16T03:51:36-06:00
            iterations: 1
            commit_sha: 8ae3699f9d6e4c132e55ef984796df95534fa362
            tokens:
                input_tokens: 4392025
                output_tokens: 13707
                total_tokens: 0
    gates:
        - phase: spec
          gate_type: auto
          approved: true
          reason: auto-approved on success
          timestamp: 2026-01-16T03:27:37-06:00
        - phase: spec
          gate_type: auto
          approved: true
          reason: auto-approved on success
          timestamp: 2026-01-16T03:27:37-06:00
        - phase: spec
          gate_type: auto
          approved: true
          reason: auto-approved on success
          timestamp: 2026-01-16T03:27:37-06:00
        - phase: spec
          gate_type: auto
          approved: true
          reason: auto-approved on success
          timestamp: 2026-01-16T03:27:37-06:00
        - phase: spec
          gate_type: auto
          approved: true
          reason: auto-approved on success
          timestamp: 2026-01-16T03:27:37-06:00
        - phase: spec
          gate_type: auto
          approved: true
          reason: auto-approved on success
          timestamp: 2026-01-16T03:27:37-06:00
        - phase: spec
          gate_type: auto
          approved: true
          reason: auto-approved on success
          timestamp: 2026-01-16T03:27:37-06:00
        - phase: implement
          gate_type: auto
          approved: true
          reason: auto-approved on success
          timestamp: 2026-01-16T03:30:56-06:00
        - phase: implement
          gate_type: auto
          approved: true
          reason: auto-approved on success
          timestamp: 2026-01-16T03:30:56-06:00
        - phase: implement
          gate_type: auto
          approved: true
          reason: auto-approved on success
          timestamp: 2026-01-16T03:30:56-06:00
        - phase: implement
          gate_type: auto
          approved: true
          reason: auto-approved on success
          timestamp: 2026-01-16T03:30:56-06:00
        - phase: implement
          gate_type: auto
          approved: true
          reason: auto-approved on success
          timestamp: 2026-01-16T03:30:56-06:00
        - phase: test
          gate_type: auto
          approved: true
          reason: auto-approved on success
          timestamp: 2026-01-16T03:51:36-06:00
        - phase: test
          gate_type: auto
          approved: true
          reason: auto-approved on success
          timestamp: 2026-01-16T03:51:36-06:00
        - phase: test
          gate_type: auto
          approved: true
          reason: auto-approved on success
          timestamp: 2026-01-16T03:51:36-06:00
        - phase: docs
          gate_type: auto
          approved: true
          reason: auto-approved on success
          timestamp: 2026-01-16T03:52:28-06:00
    tokens:
        input_tokens: 0
        output_tokens: 0
        total_tokens: 0
    cost:
        total_cost_usd: 0
transcripts:
    - id: 264
      taskid: TASK-267
      phase: docs
      iteration: 1
      role: combined
      content: |
        # docs - Iteration 1

        ## Prompt

        Update documentation for:

        **Task**: Expand Task Info panel with more metadata
        **Category**: feature

        ## Specification

        # Specification: Expand Task Info panel with more metadata

        ## Problem Statement
        [1-2 sentences]

        ## Success Criteria
        - [ ] [Criterion 1]
        - [ ] [Criterion 2]

        ## Testing Requirements
        - [ ] [Test 1]
        - [ ] [Test 2]

        ## Scope
        ### In Scope
        - [Item]
        ### Out of Scope
        - [Item]

        ## Technical Approach
        [Brief implementation plan]

        ### Files to Modify
        - [file]: [change]

        ## [Category-Specific Section]
        [Include appropriate section based on category]

        ## Instructions

        1. Update any relevant documentation files
        2. Ensure CLAUDE.md reflects the changes if applicable
        3. Add/update code comments where needed
        4. Update README if user-facing changes were made

        Keep iterating until documentation is complete.

        After completing, commit:
        ```bash
        git add -A
        git commit -m "[orc] TASK-267: docs - completed"
        ```

        When done, output:
        ```
        **Commit**: [SHA]
        <phase_complete>true</phase_complete>
        ```


        ## Response

        **Commit**: 6049a31d
        <phase_complete>true</phase_complete>

        ---
        Tokens: 487082 input, 1637 output, 73027 cache_creation, 414046 cache_read
        Complete: true
        Blocked: false
      timestamp: 1768627233
    - id: 265
      taskid: TASK-267
      phase: implement
      iteration: 1
      role: combined
      content: |
        # implement - Iteration 1

        ## Prompt

        Implement the task according to the specification:

        **Task**: Expand Task Info panel with more metadata
        **Category**: feature

        ## Initiative Context

        This task is part of **Frontend Polish & UX Audit** (INIT-013).

        ### Vision

        Comprehensive audit and enhancement of the web UI: ensure all backend features are accessible, fix visual/functional issues, improve UX patterns, ensure responsive design, and modernize presentation following frontend-design standards.

        **Alignment**: Ensure your work aligns with the initiative vision and respects prior decisions.


        ## Specification

        # Specification: Expand Task Info panel with more metadata

        ## Problem Statement
        [1-2 sentences]

        ## Success Criteria
        - [ ] [Criterion 1]
        - [ ] [Criterion 2]

        ## Testing Requirements
        - [ ] [Test 1]
        - [ ] [Test 2]

        ## Scope
        ### In Scope
        - [Item]
        ### Out of Scope
        - [Item]

        ## Technical Approach
        [Brief implementation plan]

        ### Files to Modify
        - [file]: [change]

        ## [Category-Specific Section]
        [Include appropriate section based on category]



        ## Instructions

        1. Review the spec's success criteria - these are your acceptance criteria
        2. Implement the required changes following the technical approach
        3. Write/update tests alongside code (as specified in Testing Requirements)
        4. Run tests and fix any failures
        5. Self-review against success criteria before completing

        ### Self-Review Checklist
        - [ ] All success criteria from spec addressed
        - [ ] All testing requirements satisfied
        - [ ] Scope boundaries respected (no extra features)
        - [ ] Error handling complete
        - [ ] Code follows project patterns

        Keep iterating until implementation is complete and tests pass.

        After completing, commit:
        ```bash
        git add -A
        git commit -m "[orc] TASK-267: implement - completed"
        ```

        When done, output:
        ```
        **Commit**: [SHA]
        <phase_complete>true</phase_complete>
        ```


        ## Response

        **Commit**: bbf3b59f
        <phase_complete>true</phase_complete>

        ---
        Tokens: 2363811 input, 8403 output, 78159 cache_creation, 2285618 cache_read
        Complete: true
        Blocked: false
      timestamp: 1768627233
    - id: 266
      taskid: TASK-267
      phase: spec
      iteration: 1
      role: combined
      content: |
        # spec - Iteration 1

        ## Prompt

        Create a specification for this task:

        **Task**: Expand Task Info panel with more metadata
        **Category**: feature
        **Description**: ## Problem
        The Task Info panel in task detail shows minimal information:
        - Weight: small
        - Status: planned
        - Created: Jan 15, 2026

        Missing important metadata that exists on the task.

        ## Should Also Include
        - Priority (critical/high/normal/low)
        - Category (feature/bug/refactor/etc.)
        - Queue (active/backlog)
        - Initiative (with link)
        - Last updated timestamp
        - Blocked by count (if any)
        - Branch name (currently shown elsewhere but fits here too)

        ## Location
        - components/task-detail/TimelineTab.tsx (Task Info section)

        ## Technical Notes
        - Panel has room for more rows
        - Match formatting of existing dt/dd pairs

        ## Initiative Context

        This task is part of **Frontend Polish & UX Audit** (INIT-013).

        ### Vision

        Comprehensive audit and enhancement of the web UI: ensure all backend features are accessible, fix visual/functional issues, improve UX patterns, ensure responsive design, and modernize presentation following frontend-design standards.

        **Alignment**: Ensure your work aligns with the initiative vision and respects prior decisions.


        ## Instructions

        Create a clear, actionable specification that defines exactly what needs to be done
        and how to verify it's complete.

        ### 1. Problem Statement
        Summarize what needs to be solved in 1-2 sentences.

        ### 2. Success Criteria (REQUIRED)
        Define specific, testable criteria as checkboxes:
        - Each criterion must be verifiable (file exists, test passes, API returns X)
        - No vague language ("works well", "is fast")
        - Include both functional and quality criteria

        ### 3. Testing Requirements (REQUIRED)
        Specify what tests must pass:
        - [ ] Unit test: [specific test description]
        - [ ] Integration test: [if applicable]
        - [ ] E2E test: [if UI changes]

        ### 4. Scope
        Define boundaries to prevent scope creep:
        - **In Scope**: What will be implemented
        - **Out of Scope**: What will NOT be implemented

        ### 5. Technical Approach
        Brief plan for implementation:
        - Files to modify
        - Key changes in each file

        ### 6. Category-Specific Analysis

        **If this is a BUG (category=bug):**
        - Reproduction Steps: Exact steps to trigger the bug
        - Current Behavior: What happens now (the bug)
        - Expected Behavior: What should happen
        - Root Cause: Where the bug originates (if known)
        - Verification: How to confirm the fix works

        **If this is a FEATURE (category=feature):**
        - User Story: As a [user], I want [feature] so that [benefit]
        - Acceptance Criteria: Specific conditions for feature acceptance

        **If this is a REFACTOR (category=refactor):**
        - Before Pattern: Current code/architecture
        - After Pattern: Target code/architecture
        - Risk Assessment: What could break

        ## Output Format

        Wrap your spec in artifact tags:

        <artifact>
        # Specification: Expand Task Info panel with more metadata

        ## Problem Statement
        [1-2 sentences]

        ## Success Criteria
        - [ ] [Criterion 1]
        - [ ] [Criterion 2]

        ## Testing Requirements
        - [ ] [Test 1]
        - [ ] [Test 2]

        ## Scope
        ### In Scope
        - [Item]
        ### Out of Scope
        - [Item]

        ## Technical Approach
        [Brief implementation plan]

        ### Files to Modify
        - [file]: [change]

        ## [Category-Specific Section]
        [Include appropriate section based on category]
        </artifact>

        After completing the spec, commit:
        ```bash
        git add -A
        git commit -m "[orc] TASK-267: spec - completed"
        ```

        Then output:
        ```
        **Commit**: [SHA]
        <phase_complete>true</phase_complete>
        ```

        If blocked (requirements unclear):
        ```
        <phase_blocked>
        reason: [what's unclear]
        needs: [what clarification is needed]
        </phase_blocked>
        ```


        ## Response

        **Commit**: b444aea6

        <artifact>
        # Specification: Expand Task Info panel with more metadata

        ## Problem Statement

        The Task Info panel in TimelineTab shows only basic information (weight, status, created date, timestamps), missing important task metadata that users need for context: priority, category, queue, initiative, last updated, blocked_by count, and branch name.

        ## Success Criteria

        - [ ] Priority field displayed with appropriate styling (critical/high/normal/low)
        - [ ] Category field displayed with icon matching TaskHeader pattern
        - [ ] Queue field displayed (active/backlog)
        - [ ] Initiative field displayed as clickable link to initiative page (when set)
        - [ ] Updated timestamp displayed showing last modification time
        - [ ] Blocked by count displayed when task has blockers (e.g., "2 tasks")
        - [ ] Branch name displayed with code formatting (currently shown elsewhere but fits here)
        - [ ] All new fields match existing dt/dd pair formatting
        - [ ] All new fields conditionally render (skip if value is undefined/null)
        - [ ] Styling consistent with existing info-item pattern

        ## Testing Requirements

        - [ ] Unit test: TimelineTab renders priority field with correct styling class
        - [ ] Unit test: TimelineTab renders category field with correct icon
        - [ ] Unit test: TimelineTab renders initiative as clickable link
        - [ ] Unit test: TimelineTab renders blocked_by count when blockers exist
        - [ ] Unit test: TimelineTab hides optional fields when not set
        - [ ] E2E test: Task detail page displays all metadata fields correctly

        ## Scope

        ### In Scope
        - Adding priority, category, queue, initiative, updated_at, blocked_by count, and branch to Task Info section
        - Matching existing styling patterns (dt/dd pairs, status colors)
        - Making initiative a clickable link to `/initiatives/:id`
        - Conditional rendering for optional fields

        ### Out of Scope
        - Modifying the info-item CSS styling (use existing)
        - Adding edit functionality within Task Info panel (TaskEditModal handles edits)
        - Adding dependency management UI (DependencySidebar handles this)
        - Changing the layout or position of Task Info panel

        ## Technical Approach

        The Task Info section in TimelineTab.tsx needs additional fields. All required data is already available on the `task` prop. The initiative link requires importing `Link` from react-router-dom and `getInitiativeBadgeTitle` from stores (following TaskHeader.tsx pattern).

        ### Files to Modify

        1. **web/src/components/task-detail/TimelineTab.tsx**
           - Import `Link` from react-router-dom
           - Import `Icon` (already imported)
           - Import `getInitiativeBadgeTitle` from `@/stores`
           - Import `CATEGORY_CONFIG`, `PRIORITY_CONFIG` from `@/lib/types`
           - Add priority field with priority-specific class
           - Add category field with icon
           - Add queue field
           - Add initiative field as Link
           - Add updated_at field (using existing `formatDate` helper)
           - Add blocked_by count field
           - Add branch field with code tag

        2. **web/src/components/task-detail/TimelineTab.css**
           - Add priority-specific color classes (matching TaskHeader pattern)
           - Add category-color styling
           - Add initiative link styling (clickable, underline on hover)
           - Add branch code styling

        3. **web/src/components/task-detail/TimelineTab.test.tsx** (new file)
           - Unit tests for new metadata fields
           - Mock store for initiative badge lookup

        ## Feature Details

        ### User Story
        As a user viewing a task's timeline, I want to see comprehensive task metadata in the Task Info panel so that I have full context without navigating to other views.

        ### Acceptance Criteria

        1. **Priority** - Displays the task priority with color coding:
           - critical: red/error color
           - high: orange/warning color
           - normal: muted text
           - low: muted text

        2. **Category** - Displays task category with matching icon:
           - feature: sparkles icon, green
           - bug: bug icon, red
           - refactor: recycle icon, blue
           - chore: tools icon, muted
           - docs: file-text icon, orange
           - test: beaker icon, accent color

        3. **Queue** - Displays "active" or "backlog"

        4. **Initiative** - When task has `initiative_id`:
           - Displays initiative badge (from `getInitiativeBadgeTitle`)
           - Clickable link navigating to `/initiatives/:id`
           - Shows layers icon

        5. **Updated** - Displays `updated_at` timestamp in same format as created_at

        6. **Blocked By** - When `blocked_by` array has items:
           - Shows count: "N task(s)"
           - Links to DependencySidebar (or just informational)

        7. **Branch** - Displays branch name in `<code>` tags matching phase-commit styling

        ### Field Order
        1. Weight (existing)
        2. Status (existing)
        3. Priority (new)
        4. Category (new)
        5. Queue (new)
        6. Initiative (new)
        7. Blocked By (new, conditional)
        8. Branch (new)
        9. Retries (existing, conditional)
        10. Created (existing)
        11. Updated (new)
        12. Started (existing, conditional)
        13. Completed (existing, conditional)
        </artifact>

        <phase_complete>true</phase_complete>

        ---
        Tokens: 753561 input, 5462 output, 57768 cache_creation, 695734 cache_read
        Complete: true
        Blocked: false
      timestamp: 1768627233
    - id: 267
      taskid: TASK-267
      phase: test
      iteration: 1
      role: combined
      content: |
        # test - Iteration 1

        ## Prompt

        Test and review the implementation:

        **Task**: Expand Task Info panel with more metadata
        **Category**: feature

        ## Specification

        # Specification: Expand Task Info panel with more metadata

        ## Problem Statement
        [1-2 sentences]

        ## Success Criteria
        - [ ] [Criterion 1]
        - [ ] [Criterion 2]

        ## Testing Requirements
        - [ ] [Test 1]
        - [ ] [Test 2]

        ## Scope
        ### In Scope
        - [Item]
        ### Out of Scope
        - [Item]

        ## Technical Approach
        [Brief implementation plan]

        ### Files to Modify
        - [file]: [change]

        ## [Category-Specific Section]
        [Include appropriate section based on category]

        ## Instructions

        1. Run the full test suite
        2. Verify all Testing Requirements from spec are satisfied
        3. Review code for quality issues
        4. Check for edge cases and security issues
        5. Fix any problems found

        ### Verification Against Spec
        Go through each Success Criterion and Testing Requirement from the spec
        and verify it's satisfied.

        Keep iterating until all tests pass and code quality is acceptable.

        After completing, commit:
        ```bash
        git add -A
        git commit -m "[orc] TASK-267: test - completed"
        ```

        When done, output:
        ```
        **Commit**: [SHA]
        <phase_complete>true</phase_complete>
        ```


        ## Response

        ## Summary

        **Test phase completed successfully.**

        ### What was done:

        1. **Ran test suites:**
           - Backend tests: 299 passed (2 pre-existing failures unrelated to TASK-267: `TestBranch_UpdateActivity` - a storage layer bug, and `TestRun_Performance` - timing-sensitive test)
           - Frontend tests: 732 passed (30 new tests added)
           - E2E tests: Dashboard tests pass; task-detail tests have pre-existing sandbox setup issues (failing on main as well)

        2. **Verified Success Criteria:**
           - Priority field with styling
           - Category field with icons
           - Queue field
           - Initiative as clickable link
           - Updated timestamp
           - Branch name with code formatting
           - All fields match dt/dd formatting
           - Conditional rendering for optional fields

        3. **Fixed missing implementation:**
           - Added `blocked_by` count field (was specified in spec but missing from implementation)
           - Added corresponding CSS styling for `.info-blocked-by`

        4. **Created unit tests:**
           - Created `TimelineTab.test.tsx` with 30 comprehensive tests covering all new metadata fields

        **Commit**: ecd3ab04

        <phase_complete>true</phase_complete>

        ---
        Tokens: 4392025 input, 13707 output, 101527 cache_creation, 4290295 cache_read
        Complete: true
        Blocked: false
      timestamp: 1768627233
gate_decisions:
    - id: 65595
      taskid: TASK-267
      phase: spec
      gatetype: auto
      approved: true
      reason: auto-approved on success
      decidedby: ""
      decidedat: 2026-01-16T03:27:37-06:00
    - id: 65601
      taskid: TASK-267
      phase: spec
      gatetype: auto
      approved: true
      reason: auto-approved on success
      decidedby: ""
      decidedat: 2026-01-16T03:27:37-06:00
    - id: 65602
      taskid: TASK-267
      phase: spec
      gatetype: auto
      approved: true
      reason: auto-approved on success
      decidedby: ""
      decidedat: 2026-01-16T03:27:37-06:00
    - id: 65619
      taskid: TASK-267
      phase: spec
      gatetype: auto
      approved: true
      reason: auto-approved on success
      decidedby: ""
      decidedat: 2026-01-16T03:27:37-06:00
    - id: 65621
      taskid: TASK-267
      phase: spec
      gatetype: auto
      approved: true
      reason: auto-approved on success
      decidedby: ""
      decidedat: 2026-01-16T03:27:37-06:00
    - id: 65624
      taskid: TASK-267
      phase: spec
      gatetype: auto
      approved: true
      reason: auto-approved on success
      decidedby: ""
      decidedat: 2026-01-16T03:27:37-06:00
    - id: 65627
      taskid: TASK-267
      phase: spec
      gatetype: auto
      approved: true
      reason: auto-approved on success
      decidedby: ""
      decidedat: 2026-01-16T03:27:37-06:00
    - id: 65603
      taskid: TASK-267
      phase: implement
      gatetype: auto
      approved: true
      reason: auto-approved on success
      decidedby: ""
      decidedat: 2026-01-16T03:30:56-06:00
    - id: 65620
      taskid: TASK-267
      phase: implement
      gatetype: auto
      approved: true
      reason: auto-approved on success
      decidedby: ""
      decidedat: 2026-01-16T03:30:56-06:00
    - id: 65622
      taskid: TASK-267
      phase: implement
      gatetype: auto
      approved: true
      reason: auto-approved on success
      decidedby: ""
      decidedat: 2026-01-16T03:30:56-06:00
    - id: 65625
      taskid: TASK-267
      phase: implement
      gatetype: auto
      approved: true
      reason: auto-approved on success
      decidedby: ""
      decidedat: 2026-01-16T03:30:56-06:00
    - id: 65628
      taskid: TASK-267
      phase: implement
      gatetype: auto
      approved: true
      reason: auto-approved on success
      decidedby: ""
      decidedat: 2026-01-16T03:30:56-06:00
    - id: 65623
      taskid: TASK-267
      phase: test
      gatetype: auto
      approved: true
      reason: auto-approved on success
      decidedby: ""
      decidedat: 2026-01-16T03:51:36-06:00
    - id: 65626
      taskid: TASK-267
      phase: test
      gatetype: auto
      approved: true
      reason: auto-approved on success
      decidedby: ""
      decidedat: 2026-01-16T03:51:36-06:00
    - id: 65629
      taskid: TASK-267
      phase: test
      gatetype: auto
      approved: true
      reason: auto-approved on success
      decidedby: ""
      decidedat: 2026-01-16T03:51:36-06:00
    - id: 65630
      taskid: TASK-267
      phase: docs
      gatetype: auto
      approved: true
      reason: auto-approved on success
      decidedby: ""
      decidedat: 2026-01-16T03:52:28-06:00

id: TASK-212
title: Replace TaskCard quick menu with Radix DropdownMenu
description: "## Overview\nReplace the custom quick menu in TaskCard with Radix DropdownMenu for proper accessibility.\n\n## Current Implementation\nLocation: web-react/src/components/board/TaskCard.tsx\n- Custom dropdown with click-outside detection\n- Manual keyboard handling (limited)\n- CSS classes: .quick-menu, .quick-menu-backdrop, .quick-menu-dropdown, .menu-section, .menu-label, .menu-item, .menu-divider\n\n## Radix DropdownMenu Mapping\n\n### Component Mapping\n| Current | Radix | CSS Class |\n|---------|-------|-----------|\n| More button | DropdownMenu.Trigger | .action-btn.more |\n| Menu container | DropdownMenu.Portal + Content | .quick-menu-dropdown |\n| Section | DropdownMenu.Group | .menu-section |\n| Label | DropdownMenu.Label | .menu-label |\n| Item (single select) | DropdownMenu.RadioItem | .menu-item |\n| Divider | DropdownMenu.Separator | .menu-divider |\n\n### Animation\n```css\n.quick-menu-dropdown[data-state='open'] {\n  animation: dropdown-enter var(--duration-fast) var(--ease-out);\n}\n\n.quick-menu-dropdown[data-state='closed'] {\n  animation: dropdown-exit var(--duration-fast) var(--ease-in);\n}\n\n@keyframes dropdown-enter {\n  from { opacity: 0; transform: scale(0.95) translateY(-4px); }\n  to { opacity: 1; transform: scale(1) translateY(0); }\n}\n\n@keyframes dropdown-exit {\n  from { opacity: 1; transform: scale(1) translateY(0); }\n  to { opacity: 0; transform: scale(0.95) translateY(-4px); }\n}\n```\n\n## Implementation Structure\n```tsx\n<DropdownMenu.Root>\n  <DropdownMenu.Trigger asChild>\n    <Button variant=\"ghost\" size=\"sm\" iconOnly className=\"action-btn more\">\n      <Icon name=\"more-vertical\" />\n    </Button>\n  </DropdownMenu.Trigger>\n  \n  <DropdownMenu.Portal>\n    <DropdownMenu.Content className=\"quick-menu-dropdown\" sideOffset={4}>\n      {/* Queue section */}\n      <DropdownMenu.Label className=\"menu-label\">Queue</DropdownMenu.Label>\n      <DropdownMenu.RadioGroup value={queue} onValueChange={setQueue}>\n        <DropdownMenu.RadioItem value=\"active\" className=\"menu-item\">\n          Active\n        </DropdownMenu.RadioItem>\n        <DropdownMenu.RadioItem value=\"backlog\" className=\"menu-item\">\n          Backlog\n        </DropdownMenu.RadioItem>\n      </DropdownMenu.RadioGroup>\n      \n      <DropdownMenu.Separator className=\"menu-divider\" />\n      \n      {/* Priority section */}\n      <DropdownMenu.Label className=\"menu-label\">Priority</DropdownMenu.Label>\n      <DropdownMenu.RadioGroup value={priority} onValueChange={setPriority}>\n        <DropdownMenu.RadioItem value=\"critical\" className=\"menu-item\">\n          Critical\n        </DropdownMenu.RadioItem>\n        {/* ... other priorities */}\n      </DropdownMenu.RadioGroup>\n    </DropdownMenu.Content>\n  </DropdownMenu.Portal>\n</DropdownMenu.Root>\n```\n\n## Accessibility Improvements\nRadix provides automatically:\n- Arrow up/down navigates items\n- Enter/Space selects item\n- Escape closes menu\n- Focus returns to trigger\n- Typeahead (type 'c' jumps to 'Critical')\n- aria-expanded on trigger\n- aria-checked on radio items\n\n## Success Criteria\n- Quick menu is fully keyboard accessible\n- Screen reader announces items correctly\n- Visual appearance unchanged\n- All menu actions work correctly\n\n## Test Criteria\n\n### Keyboard Accessibility Tests\n- Arrow down opens menu and focuses first item\n- Arrow up/down navigates items\n- Enter selects item and closes menu\n- Escape closes menu without selection\n- Typing 'c' jumps to 'Critical' option\n- Focus returns to trigger after close\n\n### E2E Tests\n- bunx playwright test board.spec.ts passes\n- Quick menu actions work (queue change, priority change)"
weight: medium
status: planned
branch: orc/TASK-212
queue: active
priority: high
category: refactor
initiative_id: INIT-009
blocked_by:
    - TASK-211
requires_ui_testing: true
testing_requirements:
    unit: true
    visual: true
created_at: 2026-01-14T23:05:11.181076327-06:00
updated_at: 2026-01-14T23:21:30.865333444-06:00
started_at: 2026-01-14T23:16:31.059869491-06:00

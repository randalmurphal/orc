id: TASK-151
title: 'Complete auto-merge flow: wait for CI then merge after finalize'
description: |-
    After finalize phase completes successfully:
    1. Push any finalize changes (conflict resolution, sync commits)
    2. Poll gh pr checks until all CI checks pass (with timeout)
    3. Merge PR directly with gh pr merge --squash

    This removes dependency on GitHub's auto-merge feature (requires branch protection) and self-approval (blocked by GitHub). The gate becomes: finalize passes + CI passes = safe to merge.

    Config options:
    - completion.wait_for_ci: true (default) - wait for checks before merge
    - completion.ci_timeout: 10m - max time to wait for CI
    - completion.merge_on_ci_pass: true - auto-merge when CI passes
weight: medium
status: completed
current_phase: docs
branch: orc/TASK-151
queue: active
priority: normal
category: feature
requires_ui_testing: true
testing_requirements:
    unit: true
created_at: 2026-01-14T01:51:11.548414947-06:00
updated_at: 2026-01-14T02:23:26.065947904-06:00
started_at: 2026-01-14T02:06:32.647646941-06:00
completed_at: 2026-01-14T02:23:26.065947555-06:00

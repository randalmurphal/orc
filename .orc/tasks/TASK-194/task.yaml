id: TASK-194
title: 'Bug: Task worktree created from stale base causes completion conflicts'
description: |-
    When parallel tasks run and the first one merges to main, subsequent tasks' worktrees are based on a stale commit. During completion sync, this causes merge conflicts that aren't automatically resolved.

    **Reproduction:**
    1. Run TASK-A and TASK-B in parallel (both modify CLAUDE.md)
    2. TASK-A completes and merges first
    3. TASK-B completes but conflicts on CLAUDE.md

    **Root cause:** Worktree is created at task start from current main, but by completion time main has moved forward.

    **Fix options:**
    1. Rebase task branch onto main BEFORE the implement phase starts
    2. Add conflict resolution phase that uses AI to resolve conflicts
    3. Auto-rebase during completion sync before attempting merge
    4. Create worktree just-in-time when task runs (not when task is created)
weight: medium
status: completed
current_phase: docs
branch: orc/TASK-194
queue: active
priority: critical
category: bug
testing_requirements:
    unit: true
created_at: 2026-01-14T11:04:12.82619-06:00
updated_at: 2026-01-14T11:20:08.117999-06:00
started_at: 2026-01-14T11:04:26.8346-06:00
completed_at: 2026-01-14T11:20:00.135828-06:00
metadata:
    pr_url: https://github.com/randalmurphal/orc/pull/83
pr:
    url: https://github.com/randalmurphal/orc/pull/83
    number: 83
    status: pending_review

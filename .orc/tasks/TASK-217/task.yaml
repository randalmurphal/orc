id: TASK-217
title: Update visual regression baselines
description: |-
    ## Overview
    Update visual regression baselines for React frontend after all UI changes are complete.

    ## Baseline Location
    `web/e2e/__snapshots__/visual.spec.ts-snapshots/`

    ## Baselines to Review (16 Screenshots)

    ### Dashboard (3)
    | Baseline | Description |
    |----------|-------------|
    | dashboard/populated.png | Full data state |
    | dashboard/empty.png | Empty state |
    | dashboard/loading.png | Skeleton loading |

    ### Board Flat (2)
    | Baseline | Description |
    |----------|-------------|
    | board/flat/populated.png | Tasks in columns |
    | board/flat/with-running.png | Running task with pulse animation |

    ### Board Swimlane (2)
    | Baseline | Description |
    |----------|-------------|
    | board/swimlane/populated.png | Multiple initiative swimlanes |
    | board/swimlane/collapsed.png | Collapsed swimlane state |

    ### Task Detail (5)
    | Baseline | Description |
    |----------|-------------|
    | task-detail/timeline/running.png | Running task timeline |
    | task-detail/timeline/completed.png | Completed task timeline |
    | task-detail/changes/split.png | Split diff view |
    | task-detail/changes/unified.png | Unified diff view |
    | task-detail/transcript/content.png | Transcript tab content |

    ### Modals (4)
    | Baseline | Description |
    |----------|-------------|
    | modals/new-task/empty.png | Empty new task form |
    | modals/new-task/filled.png | Filled new task form |
    | modals/command-palette/open.png | Command palette open |
    | modals/keyboard-shortcuts.png | Shortcuts help modal |

    ## Configuration
    - Viewport: 1440x900 @2x (retina)
    - Browser: Chromium only
    - Tolerance: 1000 pixels max diff, 20% color threshold
    - Animations: Disabled via injected stylesheet
    - Dynamic masking: Timestamps, token counts, PIDs

    ## Process

    ### 1. Run Visual Tests
    ```bash
    cd web && bunx playwright test --project=visual
    ```

    ### 2. Review Each Diff
    For each failing screenshot:
    - Open Playwright HTML report
    - Compare expected vs actual
    - Categorize: Intentional change or regression?

    ### 3. Intentional Changes (Expected)
    Changes from this initiative:
    - Button styling may have subtle differences
    - Badge styling updates
    - Radix component state indicators (data-state)
    - Focus ring styling changes

    ### 4. Regressions (Unexpected)
    If found:
    - Do NOT update baseline
    - Create bug task to fix
    - Block this task until fixed

    ### 5. Update Baselines
    ```bash
    bunx playwright test --project=visual --update-snapshots
    ```

    ### 6. Document Changes
    In commit message, list each intentional change:
    ```
    feat(visual): update baselines for UI primitives

    Changes:
    - Button: updated focus ring styling
    - Badge: refined padding and font-size
    - Modal: Radix Dialog data-state classes
    - Dropdown: Radix Select animation states
    ```

    ## Success Criteria
    - All 16 visual regression tests pass
    - Each diff reviewed and categorized
    - No unexpected regressions
    - Intentional changes documented

    ## Commands
    ```bash
    # Compare against baselines
    bunx playwright test --project=visual

    # Update baselines (after review)
    bunx playwright test --project=visual --update-snapshots

    # View report
    bunx playwright show-report
    ```
weight: medium
status: planned
branch: orc/TASK-217
queue: active
priority: normal
category: test
initiative_id: INIT-009
blocked_by:
    - TASK-216
requires_ui_testing: true
testing_requirements:
    unit: true
    visual: true
created_at: 2026-01-14T23:05:46.491649094-06:00
updated_at: 2026-01-14T23:31:53.532022665-06:00

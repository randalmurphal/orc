id: TASK-208
title: Migrate task-detail components to Button primitive
description: |-
    ## Overview
    Replace all raw <button> elements in task-detail components with the Button primitive.

    ## Files and Button Audit

    ### TaskHeader.tsx (~9 buttons)
    | Button | Current Usage | Button Props |
    |--------|---------------|--------------|
    | Run task | Primary action | variant=success, size=md |
    | Pause task | Secondary action | variant=secondary, size=md |
    | Resume task | Primary action | variant=primary, size=md |
    | Edit task | Secondary action | variant=secondary, size=md |
    | Delete task | Danger action | variant=danger, size=md |
    | Export dropdown trigger | Ghost | variant=ghost, size=sm |
    | Back navigation | Ghost | variant=ghost, size=sm |
    | Finalize | Primary action | variant=primary, size=md |

    ### ChangesTab.tsx (~11 buttons)
    | Button | Current Usage | Button Props |
    |--------|---------------|--------------|
    | View toggle (split/unified) | Toggle buttons | variant=ghost, size=sm |
    | Expand all | Ghost action | variant=ghost, size=sm |
    | Collapse all | Ghost action | variant=ghost, size=sm |
    | File expand/collapse | Per file | variant=ghost, size=sm, iconOnly |
    | Add comment | Inline action | variant=ghost, size=sm |
    | Send to agent | Primary action | variant=primary, size=sm |

    ### TranscriptTab.tsx (~10 buttons)
    | Button | Current Usage | Button Props |
    |--------|---------------|--------------|
    | Pagination (prev/next) | Navigation | variant=ghost, size=sm |
    | Expand/collapse sections | Toggle | variant=ghost, size=sm, iconOnly |
    | Export transcript | Action | variant=secondary, size=sm |
    | Copy to clipboard | Action | variant=ghost, size=sm, iconOnly |

    ### CommentsTab.tsx (~11 buttons)
    | Button | Current Usage | Button Props |
    |--------|---------------|--------------|
    | Filter tabs | Tab-like | variant=ghost, size=sm |
    | Submit comment | Primary | variant=primary, size=md |
    | Edit comment | Ghost | variant=ghost, size=sm, iconOnly |
    | Delete comment | Danger | variant=danger, size=sm, iconOnly |
    | Cancel edit | Secondary | variant=secondary, size=sm |
    | Save edit | Primary | variant=primary, size=sm |

    ### TestResultsTab.tsx
    - Screenshot gallery controls: variant=ghost, size=sm
    - Trace download: variant=secondary, size=sm

    ### AttachmentsTab.tsx
    - Upload button: variant=primary, size=md
    - Delete attachment: variant=danger, size=sm, iconOnly
    - Lightbox controls: variant=ghost, size=sm

    ### DependencySidebar.tsx
    - Add blocker: variant=ghost, size=sm
    - Remove blocker: variant=danger, size=sm, iconOnly
    - Add related: variant=ghost, size=sm
    - Remove related: variant=danger, size=sm, iconOnly
    - Collapse toggle: variant=ghost, size=sm, iconOnly

    ## Requirements
    - E2E tests must pass WITHOUT selector changes
    - Visual parity with current implementation
    - Preserve data-testid attributes

    ## Definition of Done
    - [ ] Exact button count audit completed per file
    - [ ] All buttons migrated with correct variants
    - [ ] npm run test passes
    - [ ] bunx playwright test task-detail.spec.ts passes
    - [ ] bunx playwright test --project=visual passes

    ## Success Criteria
    All task-detail buttons use Button component with visual parity.
weight: medium
status: planned
branch: orc/TASK-208
queue: active
priority: high
category: refactor
initiative_id: INIT-009
blocked_by:
    - TASK-203
requires_ui_testing: true
testing_requirements:
    unit: true
created_at: 2026-01-14T23:04:41.200872721-06:00
updated_at: 2026-01-14T23:19:57.918836453-06:00

id: TASK-214
title: Replace TabNav with Radix Tabs
description: "## Overview\nReplace custom TabNav component with Radix Tabs for proper accessibility.\n\n## Current Implementation\nLocation: web-react/src/components/task-detail/TabNav.tsx\nCurrent classes: .tab-nav (container), .tab-btn (buttons), .tab-btn.active (selected)\n\nNote: Current TabNav only renders tab buttons. Tab panels are rendered separately in TaskDetail.tsx based on activeTab state.\n\n## Radix Tabs Mapping\n\n### Component Mapping\n| Current | Radix | CSS Class |\n|---------|-------|-----------|\n| Container | Tabs.Root | - |\n| Button container | Tabs.List | .tab-nav |\n| Tab button | Tabs.Trigger | .tab-btn |\n| Panel container | Tabs.Content | .tab-panel |\n\n### Animation\n```css\n.tab-btn[data-state='active'] {\n  background: var(--accent-glow);\n  color: var(--text-primary);\n}\n\n.tab-btn:focus-visible {\n  outline: none;\n  box-shadow: 0 0 0 2px var(--accent-glow);\n}\n\n/* Panel fade-in */\n.tab-panel[data-state='active'] {\n  animation: tab-panel-in var(--duration-fast) var(--ease-out);\n}\n\n@keyframes tab-panel-in {\n  from { opacity: 0; }\n  to { opacity: 1; }\n}\n```\n\n## Implementation\n\n### Option A: Full Radix Tabs (Recommended)\nWrap entire tab section in Tabs.Root:\n```tsx\n<Tabs.Root value={activeTab} onValueChange={setActiveTab}>\n  <Tabs.List className=\"tab-nav\">\n    <Tabs.Trigger value=\"timeline\" className=\"tab-btn\">\n      <Icon name=\"clock\" /> Timeline\n    </Tabs.Trigger>\n    <Tabs.Trigger value=\"changes\" className=\"tab-btn\">\n      <Icon name=\"git-commit\" /> Changes\n    </Tabs.Trigger>\n    {/* ... other tabs */}\n  </Tabs.List>\n  \n  <Tabs.Content value=\"timeline\" className=\"tab-panel\">\n    <TimelineTab />\n  </Tabs.Content>\n  <Tabs.Content value=\"changes\" className=\"tab-panel\">\n    <ChangesTab />\n  </Tabs.Content>\n  {/* ... other panels */}\n</Tabs.Root>\n```\n\n### Option B: Tabs.List Only (Minimal Change)\nIf panels must stay separate:\n```tsx\n<Tabs.Root value={activeTab} onValueChange={setActiveTab} activationMode=\"manual\">\n  <Tabs.List className=\"tab-nav\">\n    <Tabs.Trigger value=\"timeline\" className=\"tab-btn\">Timeline</Tabs.Trigger>\n    {/* ... */}\n  </Tabs.List>\n</Tabs.Root>\n\n{/* Panels rendered separately based on activeTab */}\n{activeTab === 'timeline' && <TimelineTab />}\n```\n\n## URL Persistence\nCurrent behavior: Tab state synced to URL (?tab=changes)\nPreserve this by updating URL in onValueChange:\n```tsx\nconst handleTabChange = (tab: string) => {\n  setActiveTab(tab);\n  const url = new URL(window.location.href);\n  url.searchParams.set('tab', tab);\n  window.history.replaceState({}, '', url.toString());\n};\n```\n\n## Accessibility Improvements\nRadix provides:\n- Arrow left/right switches between tabs\n- Tab key moves focus to active panel content\n- aria-selected on active tab\n- aria-controls linking tab to panel\n\n## Success Criteria\n- Tab navigation is fully keyboard accessible\n- URL persistence works correctly\n- Visual appearance unchanged\n- Arrow key navigation between tabs\n\n## Test Criteria\n\n### Keyboard Accessibility Tests\n- Arrow left/right switches active tab\n- Tab key moves focus to panel content\n- Focus indicator visible on keyboard nav\n- Home/End jumps to first/last tab\n\n### E2E Tests\n- bunx playwright test task-detail.spec.ts passes\n- Tab switching works\n- URL updates with tab change"
weight: medium
status: planned
branch: orc/TASK-214
queue: active
priority: normal
category: refactor
initiative_id: INIT-009
blocked_by:
    - TASK-210
requires_ui_testing: true
testing_requirements:
    unit: true
    visual: true
created_at: 2026-01-14T23:05:24.219304116-06:00
updated_at: 2026-01-14T23:22:17.152831749-06:00
